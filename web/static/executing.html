<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Saffron - Extracting the Valuable Threads of Expertise</title>

        <link rel="stylesheet" href="/vendors/iconfonts/mdi/css/materialdesignicons.min.css">
        <link rel="stylesheet" href="/vendors/css/vendor.bundle.base.css">
        <link rel="stylesheet" href="/css/style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.min.css">
        <style>
            .ack {
                font-size: .7em;
                padding-top:20px;
            }
            .loader {
                border: 16px solid #005495; /* Light grey */
                border-top: 16px solid #f48120; /* Blue */
                border-radius: 50%;
                width: 120px;
                height: 120px;
                animation: spin 2s linear infinite;
            }

            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }

            .failed {
                text-color: red;
            }
        </style>

        <link rel="shortcut icon" href="/images/favicon.png" />
    </head>
    <body>
        <div class="container-scroller">

            <nav class="navbar default-layout-navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row menu-boxed">
                <div class="navbar-brand-wrapper d-flex align-items-center justify-content-center">
                    <a class="navbar-brand brand-logo" href="/"><img src="/images/logo.svg" alt="logo"/></a>
                    <a class="navbar-brand brand-logo-mini" href="/"><img src="/images/logo-mini.svg" alt="logo"/></a>
                </div>
                <div class="navbar-menu-wrapper d-flex align-items-stretch">
                    <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
                        <span class="mdi mdi-menu"></span>
                    </button>
                </div>
            </nav>

            <div class="container-fluid page-body-wrapper">

                <div class="main-panel">
                    <div class="content-wrapper">
                        <div class="row" style="padding-top:150px;">
                            <div class="col-md-5"></div>
                            <div class="col col-auto" ng-app="app">
                                <div class="loader"></div>
                                <div ng-controller="StatusController" ng-class="{failed: data.failed}" style="padding-top:20px;">
                                    Stage {{data.stage}}: {{data.statusMessage}}
                                </div>

                            </div>
                            <div class="col-md-5"></div>
                        </div>

                    </div>
                    <div style="clear:both;"></div>

                </div>
            </div>
        </div>

        <div id="page_footer">
            <div>
                <a href="http://www.insight-centre.org/"><img width="81" height="40" id="insight_logo" alt="INSIGHT" src="/images/insight.png" /></a>
                <a href="http://www.nuigalway.ie/"><img width="176" height="50" id="nui_logo" alt="NUI Galway" src="/images/nuigalway.png" /></a>
                <a href="http://www.sfi.ie/"><img height="75" id="sfi_logo"	alt="SFI" src="/images/sfi.png" /></a>
                <p>This resource has been funded by Science Foundation
                    Ireland under Grant No. SFI/08/CE/I1380 (Lion-2) and by Grant No. SFI/12/RC/2289 (Insight Centre for Data Analytics)</p>
                <p>&COPY; 2018 <a href="http://datascienceinstitute.ie/">Data Science Institute</a>, <a href="http://nuigalway.ie/">National University of Ireland, Galway</a></p>
            </div>
        </div>
    </div>



    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script src="/js/off-canvas.js"></script>
    <script src="/js/misc.js"></script>



    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.js"></script>

    <script>
        angular.module('app', []);
        angular.module('app').controller('StatusController', function ($scope, $timeout, $http) {
            $scope.data = {};
            (function tick() {
                $http.get("/execute/status?name={{name}}").then(function (response) {
                    $scope.data = response.data;
                    if ($scope.data.completed) {
                        window.location = "/{{name}}/";
                    } else if ($scope.data.advanced) {
                        window.location = "/execute?name={{name}}";
                    }
                    $timeout(tick, 100);
                }, function (error) {
                    // Probably a dead run
                    window.location = '/';
                });
            })();
        });
    </script>

</body>

</html>
