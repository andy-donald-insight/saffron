ERRORDIAGNOSING ANDSELECTION INA , TRAINING SYSTEM
FORSE NOND LANG UA GELE ARNING
Wolfgang Menzel
Zentral institut fur Sprachwissense haft
Aka demieder Wissense haften der DDR
Pren~lauer Prome nade 149-152
Berlin , 1100, DDR

A diagnosing procedure to be used in intelli -gent systems for language instruction is presented  . Based on a knowledge represent a-tion scheme for a certain class of syntactic cor rectness conditions the system carries out a thorough analysis of possible error hypoth -eses and their consequences  . A comparison with earlier attempts shows a clearly improved precision of diagnostic results  . First of all , the procedure concentrates on an exact local ization of rule violations  , but-if desired-is able to infer informat i on about factual faults as well  . 
I . INTRODUCTION
Error anticipation is a key issue so far , as systems for compute Passisted language learning are to be enhanced with diagnostic and explanatory capabilities  . Traditional approaches do always rely on the central assumption that any mistake possib ly done by a student can before seen by the author of at eaching exercise in order to supp ly the tutoring system with a collection of adequate responses to all the different errors and error combinations which might occur in real training sessions  . 
Considering the enormous flexibility of natural language  , however , this assumption is only justified for smal l classes of very simple  . type exercises , and most efforts are spent into devising sensible teaching aids despite the absence of appropriate diagnostic techniques  . The author is forced to concentrate on single teaching programs without almost any chance to generalise from his results and to reuse parts of it in other contexts later  . 
More ambitious solutions certainly can be expected  , if it becomes feasible to derive the diagnost i c and explanatory abilities of the desi red system directly from ru  1 es for what is considered to be a correct con -struction in a sensible restricted subset of natural language  , instead of using pre-selected lists of poss ibly occurring answers  . 
In this respect , research in intelligent systems for second language learning sooner or later will follow similar lines as a par-allel development in the field of expert systems  , where a drastically improved diagno-stic behaviour is attempted by modelling st ructure and function of the application domain  ( yielding socalled " deep modelled " expert systems  , which then are able to inves-tigate faults by s imulating them  ) rather than collecting huge amounts of symptom-oriented regularities to be used in a straightforward inference procedure on a surface level  ( c . f . 
for instance Davis 1984).
By including semantic , syntactic and morpho-syntactie regular it ies into a single solution We is chedelet al  ( 1978 ) proposed a system fop intelligent language instruction that likewise turned out to be the most ambi-tious approach so far  . Even today , almost exactly ten years . later , its main pPemises and challenging predict ions obviously do not fully match the real pP ospects in the field  . 
~venworse , this as well as more recent attempts ( Barehan et al 1985 , Schwind 1986 ) are strongly oriented on the notion of a " typical error "  . Thus they clearly fall short of the deep-mode lling ideal and a peconnected with a number of critical shortcomings  . These shortcomings can be avoided , if it becomes possible to identify limited application domains within the area of natural language instruction which allow a training system to be strictly based on the following basic prieiples :  ( I ) Supply the system with only knowledge about correctness  . 
(2 ) Devise a diagnosis procedure which is independent of the content of the knowledge base  . 
Currently used semantic representation schemes in general seem much too rough to capture all the rather subtle distinctions pression and a deviant one in a sufficient l~sys tematic way  . Even if the necessary means would be availab le the problem of actually coding the desi red information for a realis-tic domain remains to be solved  . 
Better prospects for a successful imple- mentation of these two principles cancer- tainly be expected on the syntactic level  . 
Nevertheless , in order to diagnose structural errors ~ lll currently known solutions rely exc lusiw ~ ly on the use of " marked " rules  , representing typical mistakes and being intended to invoke appropriate error messages  . 
This practice is clearly inconsistent wi th prine ipl  , ~  ( I ) and comes out as nothing more than a simples h if t of the necessity to anticipates tudent behaviour onto a new-not necessarily more perspicuous-level  . 
Moreover , it leaves the system with all the consequences of a parsing grammar bloated wi th numbers Offault-specific rules  . 
The domain I believe is currently ripest for a strictly deep-modelled prototype is the area of morpho-syntactie correctness cond i-tions which have to be satisfied in ag iven  ( if nec ( ! ssary artificially fixed ) syntactic environm ~ nt . These consistency constraints fop well- formed syntactic trees comprise agreement re lations as well as case govern-ment and  , as Weischedel stal . (1978) acknowledge , constitute at least for languages like German a major error source  . They can easily be expressed as predicates over structured sets of morpho-syntactic features and  , if taken together , form simple networks . 
Here again , all current approaches fallback on either short-cut solutions  ( e . g . take the fir~t predicate evaluating t of a lse  ) or simple h ~ uristic guesses when trying to diag-nose  ( esp . to locate ) consistency errors . 
Heuristics ( or the use of rules-of-thumb ) typically is the method of one's choice when being f~ced with a  , by its nature , ill-defined ? , rextremely complex problem . Obvi-ously the domain of . morpho--syntactie regular-ities belongs to neither the one nor the other category  . 
Accordingly , an investigation into the problem of diagnos ing consistency violations has shown that an efficient and extremely precised iagnostic procedure can be devised  , which provides a sound basis for the genera- tion of comprehensible explanations  ( includ-ing proposals for a proper solution )   , for a valuation of the learning progress and for an adaptive determination of the further train-inq strategy  . Moreover , it turned out that non-trivial training exercises based exclu--sively on simple morpho-syntaetic correctness conditions can well be used independently of an error sensi tive ? parser and additionally are connected with a number of pedagogical and performane ~ gains  ( for a detailed discus-sion see Menzel , 1987 and 1988) . In this ease the student can be guided by an appropriate sentence context in a smooth and uncon-strained way to exactly produce those frag-mentary utterances which have the desi red fixed syntactic structure  . 
II . CONSISTENCYCONSTRAINTS
Consistency constraints to be used as a bas is for diagnosing students ' faults are expressed in a quite common way as binary pred icates which hold over structured feature sets of syntactically related word forms  ( source and destination )   . Feature sets , as usual , are attached to wordforms via the dict ionary or a morphological analysis  . To specify the part of a feature set relevant to a specific correctness condition cor rect-ness predicates are augmented by a thi rd argument  , a category : agree\[<souree > , < destination > , < eategory >\] . 
Simple examples of correctness predicates def in esymmetrical relations between equiva- lent parts of the two involved feature sets  , as does the number agreement between the determiner and the governing noun in a German noun phrase : agree  ( det , noun , number \] . 
Other predicates are needed to account for agreement between different parts of two feature sets  . One example are selectional demands of a source to be matched with the corresponding properties of a destination  , another is given by predicate scoping with the distinction between e  . g . different gender values belonging to stem or ending of German possessive pronouns  . 
A basically different type of predicates does not specify a source but instead gives a condition to be fulfilled by the dest ination : satisfy\[<destination >  , < condition >\] . 
This type is always used in one of the follow ingeases :  ( I ) Conditions of pure structural origins o that no particular source can be given  , e . g . 
the nominative of the subject : satisfy\[ noun-of-subject  , ease = nora ) . 
(2) Case government of verbs , e . g . : satisfy\[noun-of-dative-object , ease = dat\] . 
(3) Ordinary ' agreement relations where , because of the limits of a specific exer c is e  , it is not necessary or not possible to speci- fy the source of the condition explicit l y  ( cut-off ares in the constraint network )   . 
(4) Word class restrictions , e . g . a noun phrase determiner can be an article as well as a possessive or demonstrative pronoun : To achieve a Uniform treatment  , internally the satisfy-predicates are converted into ordinary agreement-pred icates between an artificially created feature expression at a now he resource  ( indicated by ***\] and the desired destinat ion : satisfy\[noun  , case=ace\]==>agree\[*** , noun , ease \] . 
A single training exercise usually is de -scribed by a number of correctness predicates which can be combined to form a simple con-st raint network  . The arcs in this network represent correctness predicates and the connected nodes a peident if ied by the source and destination arguments  . A rather simple type exercise is , for example , the correct insertion of a German possessive pronoun into a carefully generated context like : " lobhabe Schalund Mutzeverloren  . 
Hatjemand ... Sachenge sehen ?"
The exercise asks the student to have regard to the agreement of the pronoun with both  , the subsequent noun ( " Sachen " ) and the corresponding antecedent ( " Ich "\] . It results in a constraint network consist ing of three nodes and ninearcs  . Two of the nodes ( antecedent and noun \] are associated with the context whereas ~ the third  ( possessive \] represents the student's response  . The network is equivalent to the following l ist of correct-ness predicates : satisfy\[ possessive  , cat = pose-p\]satisfy\[noun , cat = noun \] satisfy\[antecedent , cat = ( noun , peps-p\]\]agree\[antecedent , possessive , stem-number \] agree\[antecedent , possessive , stem-gender \] agree\[antecedent , possessive , stem-person \] agree\[noun , possessive , case \] agree\[noun , possessive , number \] agree\[noun , possessive , gender \] . 
As a slightly more ambitious example serve the formation of a German local according to the fixed structural pattern may 
PP  ~ ( preposition determiner adjective noun \] to be inserted into sentences like " DesGold habeich  . . . gelegt . " This time the network consists of five nodes and  16 edges . All the nodes correspond to word forms in thes tuden t's response  , but depending on the sentence context only a subset of exaetly four nodes  ( e . g .   (   prep-4 dot adj noun \]\] is instantiated to the incoming word forms : satisfy\[  prep-3  , cat = prep\]satisfy\[prep-3 , select = location \] satisfy\[prep-4 , cat = prep\]satisfy\[prep-4 , select = direction \] satisfy\[det , cat = ( art , pose-p , des-p\]\] satisfy\[adj , oat = adj \] agree\[prep-3 , noun , ease\]agree\[prep-4 , noun , ease\]agree\[noun , dot , case \] agree\[noun , dot , number \] agree\[noun , dot , gender \] agree\[noun , adj , case \] agree\[noun , adj , number \] agree\[noun , adj , gender \] agree\[det , adj , inflectional-degree \] . 
III . DIAGNOSIS
Diagnosis is mainly based on constraint p ropagation techniques  . The nodes in the constraint network are t reated as variables which receive their values  ( feature sets ) by means of a pattern matching procedure on the student's input  . 
The procedure consists of four parts being invoked sequentially  . Two of them ( the hard core of diagnosis \] are intended to detect and-if desired to locate errors in the student's response  . The other two refine diagnostic results by applying transforma-tional rules and pre ference criteria in order to provide a sound basis forth@generation of appropriate explanations  . 
The reason to draw a clear distinction between the error detection and localizat ion components is one of mere technical nature  . 
The separation has been introduced to consid- erably speedup the handling of error-f ree utterances  , since it allows the time expensive local i zation procedure to be activated only if indeed an error ocurred and the student actua lly didask for an explanation of his mistake  . 
( A \] error detection
Error detection , in fact , is a direct proof procedure for the cor rectness of the utterance  . Trying to show the absence of errors , it evaluates the relevant predicates of the constraint network  , taking into con-sideration all the morpho -syntactic readings of the word forms concerned  . The values of the network variables ape constantly updated according to the results of an ordinary feature set unification until finally a state is reached which sati fies all relevant predi-cates simultaneous ly  . 
Given the ease this proof cannot be estab-l is hed  , one or possibly several mistakes of : thes tuden thave to be assumed and upon request a deta iled analysis of the error reasons may become necessary  . 
( B \] error localization
Error localization is carried out by as imulation of constraint violations  . For each predicate in the network the procedure fol : Lows up the consequences of assuming the student did ignore the existence of exactly this particular regularity  . This assumption is modelled by temporarily adding the negated predicate to the knowledge base and following up its consequences around the network  . Theoretically such a modification of the knowledge base is equivalent to reasoning based on Re  ( tar's famous " closed world as-sumption " ( Re ( tar , 1978): If you cannot proof P , add not ( P ) to the set of premises . 
By adding it as a premise the diagnosis p rocedur ~ treats a negated predicate as no-th ing more than merely an error hypothesis  . 
It can be raised to the level of a confirmed error description only after its consequences for othc ~ r predicates in the network have carefully been investigated and properly recorded  . In contrast to a typical short-cut so lut ionora heuristics-based approach the d iagnosi ~ procedure thus carries out a thorough analysis of all possible error hypotheses  . Hence , it is particularly qualified to d i agnose multiple faults as well as er rors with an ambiguous interpretation  . 
Technically this kind of reasoning is ach i eved by simply resuming error detection w i th just the logical complement of the usual feature unification results ? Error detection provides for this purpose and col lects all necessary data on a separate stack  . 
Despite the rather'tiny size of a typical constraint network  , the simulation of con-straint viol at ions results in a procedure of high complex i ty and effective measures are required to keep the size of the search space limited ? Hence  , in a widely accepted way error localizat ion is restricted to the search of minimal diagnoses  ( that is , results including only a minimum number of constraint violation hypotheses  )  ?  ( C ) error transformation According to the fundamental distinction between rules and facts in a knowledge base two different types of misconceptions have to be distingu is hed in the diagnostic results :  ( a ) rule violations : the ignorance of cor-rec tness conditions  ( expressed by predicates
Jn the network ) and ( b ) faetual faults : the lack of knowledge about specific morpho~syntactic properties of a wordform  ( expressed by a feature set in the dictionary . 
An integration of both types of misconcep-tions into a single diagnosing procedure neither yields an efficient solution nor turns out to be really necessary  . In print (- . ple , rule violations and factual faults re -pr'esent different views on one and the same phenomenon and  . a particular error can equally well he explained in terms of rules or in terms of facts  . Both types should be convert-ible into each other without much difficulty  . 
Accordingly , error localization has been designed to exclusively concentrate on the analysis of rule violations and to leave open the problem of factual faults  . A total ignorance of factual faults , of course , would be an intolerable restriction on the diagnostic capabilities of the system  , since then it interprets errors of whatever k ind in terms of rule violations only  . 
Hence , a transformational component has been added which is able to infer factual faults f rom the hither to obtained diagnostic resu lts  . The necessary information is usually conta ined in typical structural error config -urations involving the violation of ad joining predicates for one and the same morpho -syntactic category  . One or several simulta-neous constraint violations and\[not\[agree\[Xi~Y  , C \]\] , not\[agree\[Xn , Y , C\]\]\]or and\[not\[agree\[Y , Xi , C \]\] , not\[agree\[Y , X n , C\]\]\] can be transformed into a factual fault description  , iff ( i ) the set of constraint violations is com-p lete with respect to Y  , i . e . there is no other X which appears as source or destina-tion argument of a predicate agree \[ X ~ Y  , C \] or agree\[Y , X , C \] within the knowledge base , and ( 2 ) consistency holds for all neigbouring nodes of Y : agree\[Xi  , Xj , C \] . 
Under these circumstances Y is said to be is o lated with respect to C and without loss of generality a new description can be gener- ated  , stating the student's misconception to assume a wrong feature value concerning cate- gory C at the wordform Y : not\[agree  ( ~** Y , C\]\] resp . 
not ( agree(Y ,  ~*  , C\]\]again using *** to indicate a non-spec if ied source or destination  . In particular three types of structural configurations have to be distinguished :   ( I ) A single constraint violation concern ing two isolated nodes X and Y can be trans formed into two alternative factua \] er ror descriptions : not\[agree  ( X , Y , C\]\]==>exor(not\[agree\[*** , Y , C\]\]not\[agree(X ,  **~ , C \]\] . 
(2 ) A single constraint violation with on ly  . 
,  417 one isolated node Y is equivalent to asing lefactual error description : not\[ agree\[X  , Y , C\]\]==>not\[agree *** , Y , C \]\] . 
(3 ) Several constraint violations for an iso lated node Y can be summarized by a single factual error description  ( c . f . the general ease above ) . 
The decision whether to apply a transforma-t ion or not is influenced by two criteria  , the tolerable complexity of diagnostic results it is raised by  ( I )  , maintained by 2 ) and reduced by ( 3 ) ) and the in tended teaeh ing s t ra tegy ( e . f . section IV ) . 
(4) error generalization
Error generalization aims at an as high as possible aggregation of elementary errors  ( constraint violations or factual faul ts  ) into a more concise description . Generaliza-tion schemata can be defined for all three argument positions of a vio lated correctness predieate ~ e  . g . for a category generaliza-tion : and not\[ agree\[X ~ Y  , CI\]\]~not agree\[X , Y , C2\]\]\]==>not\[agree\[X , Y , ( C1 , C2 ) \]\] which for the purpose of explanation later might be paraphrased like " Missing CI and  C2 agreement between X and Y . " Other ~ eneralization rules are intended to collapse alternative diagnostic read ings which merely are art J fi~et ~ resulting from the technical layout of dictionaryent ries  . 
Besides these stringent generalization schemes sometimes very weak ones turn out to be useful as well  . They are partieularly suited to generate an at least partially comprehensible exp lanation which in an opaque error situation may give a rough indication of the error location instead of annoying the student wi th plenty of detail : and not agree\[X I  , Y , CI \]\] , \[ not agree X2 , Y , C2\]\]\]==>not agree E ** x , Y , ( C1~C2)\]\] . 
The result of a weak generalization then may be explained to the student perhaps in a sentence like : " There is something wrong wi thCI and  C2 at Y . " Since it is logically incomplete , however , a weak generalization can no longer serve as a reliable basis to derive repair suggest ions from  , neither for internal use nor for a present at i onto the student  . 

There is some reason to assume the general fours tep scheme of diagnosis not being restric ted to violations of consistency con-stra ints  , but rather being adaptable to other types of errors  , namely structural ones , as well . Again , the procedure has to be based on a detection and proper localization of ele-mentary error types with respect to a simple model of cor rectness  , e . g . a recursion-free PSG . In this context the elementary error types are substitution  , insertion and omis-sion of single word forms  . Other types ( e . g . 
extraposition or mutual interchange of forms  ) can later be inferred from the primary resu lts by means of transformation rules  . 
Generalization finally allows to condense error descriptions into more complex structural units  ( e . g . constituent based errors ) . 
IV . ERRORSELECTION
Error selection is an integral part of several steps of the diagnosis procedure  . It tries to keep the number of concurrenter ror descriptions as small as possible  . Error localization selects on the number of primary errors per error description  , but since transformation as well as general ization can influence the resulting complexity  , their results in turn are subject to a decision with regard to a minimal number of errors  . 
Although the side effect of further re-duc ing the complexity of minimal diagnoses is normally welcomed  , error transformations have to be sens it ive to the intended teaching strategy  . Diagnosing a constraint violation exact lypinpoints the conceptual mistake of thes tudent but does not always give useful hin ts about where to correct the utterance  . 
In these cases , despite being more complex , an indication of factual faults may some t imes be more helpful  , since it better points out the existing possibilities for an improvement o ~ the partially wrong solution  . 
On the other hand , even less complex factual faults may be qui teun desired if they result in doubtful cor rection proposals  ( e . g . 
in a given semantic context a gender-of-the -noun error can hardly be repaired by s imply exchanging the noun in question  )   . 
Despite the selection of minimal diagnoses on several levels  , sometimes the diagnosing component provides a number of alternative minimal diagnoses  . They finally are evaluated and weighted accordi " g to a number of prefer-encecri teria :  ( a ) a structural measure which depending on whether a conceptual description or a repai r suggestion is preferred may selecter rors higher up or deeper down in a hierarch ical syntactic representation of the ut terance  ,   ( b ) the degree to which an error explanation can be assumed to be helpful for the student  ( if possible , certai , types of explanations are suppressed ) , ( c ) hints , resulting from an obstinate repe-tition of one and the same error type  . 
V . CONCLUSIONS absolutely exact localization of an error either by pointing out theer roneous form  ( plus the categories and values involved ) or by properly reflecting an ambiguous cor rec-tion possibility:  73 percent . 
approximative localization by only in di ~ caring the violated constraint predicate without being able to decide between source or destination :  23 percent . 
Although it is connected with a number of in teresting advantages  , deep modelled reasoning clearly should not be considered the sine quanon of future too ls for language instruc-tion  . Based on the very idea of a closed world , it is by definition limited to the ra the rnarrow domains of knowledge about natural language which allow a highly relia-ble and complete description of the necessary cor rectness conditions  . Unfortunately , nei-ther high precision nor completeness can well be attributed to major parts of currently available grammar models  . 
Nevertheless , two possibilities for an advantageous app lication of the  , presented diagnosis procedure can be identi fied even today : bad localization either by returning sev-eral rule violations or by ignoring an alter-native correction possibility:  4 percent . 
Notice that not a single instance of wrong , that is ~ misleading diagnostic results occurred  . 
The system currently runs on 16-b it-micros ( with drastic reductions on 8 -bit-micros , as well ) and has been tested on a number of non-triv iale xercises for German  . Experience has shown that the approach allows diversi-fied and intensive training and supplies surprisingly precise exp lanations for most of the erroneous ut terances  . 
( I ) " standalone " use in simple exercises s imilar to the examples in section II  . 
agreement presented
References ( 2 ) integration of the procedure as a spe-cial i zed subroutine into an error sensitive parser  ( whether it be surface oriented or deep model led  ) to replace currently used heuristics for consistency cheek  . 
Fol I . owing the first opening a prototype system has bean realized which integrates the d iag no sing procedure into a learning environ -ment  . Besides the guiding advice of the sen--tent ial context additional measures have been taken to avoid the student feeling uneasy about the limitations of the fixed struc tural input pattern  . Using a menu-ba~ed input mo~e it is possible not only to inspect the dic-tionary at runt ime but also to select appro-priate word forms from it  . Thu ~ a quick and convenient interaction fac ility is offered and the student is encouraged to construct his solution in a to y kitmanner from the available stock of word forms  . 
To valuate the diagnostic capabilities of the approach a quality measurement has been carried out using the constraint network of the second exercise sample of section II  ( formation of a local PP )  . The valuation has been based on the observat i on that for prac-tical purposes the abil ity to precisely io-  . care single wordform errors is of most im -portance  . An exhaustive analysis of all in-stances of art i  . ficially implanted single word form substitutions  ( including rather " exotic " ones as well ) yielded the following results : Barchan , J ; Woodman see , B . and Yazdani , M ( 1985 ) Computer Assisted Instruction using a F rench Grammar Analyser  . Research Report 126 , Department of Computer Science , Uni-versity of Exeter . 
Davis , R .   ( 1984 ) Diagnostic Reasoning Based on Structure and Behaviour  , Artificial Inte\] . ligence , vol . 24, no . I . -3: 347-410 . 
Menzel , W .   ( 1987 ) Automated Reasoning about Natural Language Cor rectness  , Proceed-ings 3rd European Chapter of the ACL , 
Copenhagen ~ April 1987.
Menzel , W .   ( 1988 ) Wissens basierte Lehr system ef ~ rden Sprach unterricht  , Zeitschrift f ~ r Phonetik , Sprachwissenschaft und Kommunika-tions for schung  , vol . 41, Berlin : in press . 
Reiter , R . (1978) On Closed World Data Bases , in Gallaire , H . , and Miaker , J . ( eds . ), Logic and Data Bases . Plenum Press , New
York : 55-76.
Schwind , C . B .   ( 1986 ) Overview of an Intelli-gent Language Tutor ingSystem  , Proceedings 2nd International Conference on Artificial Intelligence  , CIIAM '86 , Marseille , December 1986 , Editions Hermes ~ Paris : 389-409 . 
Weisehedel , R . M . ; Voge , W . M . und James , M . 
(1978 ) An Artificial Intelligence Approach to Language Instruction  , Artificial Intel-ligence , vol . 10, no .  3: 225-240 . 

