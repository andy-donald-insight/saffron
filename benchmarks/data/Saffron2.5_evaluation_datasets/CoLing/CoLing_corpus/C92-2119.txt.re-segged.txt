AROBUSTAPPROACH FOR HAND LING OR ALDIAL OGUES
Eric Bilange & . lean-Yves Magadt , r
CAPGEMINIINNOVATION
Paris Research Ceutre
118, rue de Toc queville
75017 Paris , France
Phone : + 33(1) 405 466 66
email : bilange@capsogeti . fr & magadur@capsogeti . fr

Present limits of speech recognition and
understandi ?, g in the context of free
spoken language ( alt tumg h with a limited vocabulary ) have pervers effects on the flow of the dialogue with a system  . 
Typically a nonrobtt ~' t dialogue manager will failt of ace with these limits and conversations will often be a failure  . This paper present some possibilities of a structural approach for handling communication failures in task-oriented or aldialogues  . Several types of communication failures are presented and explained  . They must be dealt with by the dialogue manager i f we strike to have a robt ~ t system  . The exposed strategies for handling these failures are based on a structural approach of the conversation and are implemented in the SUNDIAL  , wstem . We first recall some aspects of the model and then describe the strategies for preventing and repairing communication Jailur einoral conversations with a system  . 
1 INTRODUCTION
Despite the complexity of human machine dialogue , the present limits of speech recognition and understanding techniques add further complexity  . The trouble some aspect of these limits is clearly that when a dialogue manager fails to face properly misunderstandings  , and failures in general , the conversation is tedious and often of nouse . Thus one main aspect of a robust or aldialogue system is to be able to cope with misunderstandings of any type and to respect a minimum of ergonomy in use  . 
This paper expose some techniques developed in the SUNDIAL  1 system ( Speech F " SUNDIAL is partially funded hy the Commission for the European Communities ESPRIT programme  , as project UNDerstanding and DIA Logue ) , amr , hi-user oral dialogue system over the telephone for database access  . In this system the main objective is that the dialogue with the user must be efficient and robust such that computational problems arc not apparent othe user  , i . e . , she nlust have the feeling to talk with an intelligent and llorulal parmer  . 
The exposed techniques are obviously dependent of the conversation model we used  . 
Wc recall so far the model in section 2 and 3 , but the reader is referred to IBi lange 91 a , 91b \] for further details . The rest of the paper exposes several strategies to tackle with differentypes of communication failure  . 
First , let us introduce the problematic in a more concrete way and the typology of comnmnication failures  . 
The dialogue manager receives as input a semantic representation of what the speech understanding layer has recognized from the user's utterance  . One functionality is to interpre the current user's goal  ( s ) in the context of the conversation and to appropriately reacts ott mt the rusk progresses on the right track  . 
l to wever , inputs may be corrupted in several ways : ? there may be confusions for some words  , ? only a part of the utterance is understood , ? what is understood is not what the user said , ? nothing is understood . 
So whenever the dialogue manager receives an input  , it is aware of these problems . It must then check with the user whether they share the same information  . In other words , the system 2218 . Tile parmers in this project are CAPGEMINI IN NO VATION  . CNET , CSEL'I' , DAIMLER-BENZ , ERLANGEN University , INFOVOX , IRISA , LOGICA , SARITEI . . SIEMENS , and SURREY Univerity . 
ACRESDECOLING-92, NANTES . 2328 AOt \] T1992799 Pgoc . OFCOLING-92, NANTES , AUG .  2328 ,   1992 has to be careful of providing enough feedback of its understanding in order to prevent failures  . 
As we said earlier , this must be done in such a way that the dialogue remains efficient and natural  . 
The techniques used for providing feedback and tackling with communication failure are entirely based on a structural model of the conversation in which we formalized several dialogue strategies  . Before describing our solutions , we first give a brief overview of the underlying theory  . 
2 THEDIAL OGUE MODEL
The model is structural and functional \[ Moeschler  89  , Bilange 91 a , Bilange 91b \] . The conversation is structured into four levels : transactions  , exchanges , interventions , and dialogue acts . Each of these levels has functional relationships with the dominating and adjacent one  . Fig . 1 presents the BNF syntax of the model . 
A Dialogue is made of the following components : Transactions  , Exchanges , Interventions , and Dialogue Acts ( Da ) . The syntax of the model is as follows:
D - ~, T +
T ~( E +
E - ~ . I+E*I*IEI+1--~Da+"Fig . I : the BNF lorm of the mode . \[? Transactions : are the outmost level . 
Analyses of corpora revealed that task-oriented dialogues are a collection of phases \[ Amalberti et al  84  , Ponamal 6 et al 90\] , socalled transactions . In our domain , we can identify four main transactions : dialogue opening  , problem formulation , problem resolution , and dialogue closing . The second and the third ones form a sequence that can be iterated or / and that can recursively occnr during a conversation  . 
One can think of transactions as discourse segments\[Grosz and Sidner  861 that denote plan transitions ' points at the task managentent level  . 
During a transaction , the dialogue participants try to achieve a generic goal  ( open the dialogue , for nm late the problem . . . )  . It has been also proved that participant roles depend on the type of the transaction and therefore participants ' dialoguest lategies vary according to the current transaction \[ Bilange  91 bl . 
? Exchanges : are made up of interventions or of exchanges  ( ub-exchanges )  . An exchange carries a specific goal that may contribute to the  1 similar to moves in the litter amre . 
transaction ( the one it belongs to ) or a goal dedicated to a communication clarification  . An exchange has also three possible statuses : open  , close or postponed . Once an exchange is closed , it is impossible to reenter it ( e . g . , if one wishes to discuss again about the same goal then a new exchange is opened  )  . A postponed exchange is temporarily closed and may be re-opened later  . 
? Interventions : are the basic components of exchanges  , and they are made up of dialogue acts . Three canonical illocutionary functions are attached to interventions : initiative  , reaction and evaluation . Basically , initiatives 2 open exchanges : they introduce the goal of the exchange  . Reactions react to initiatives ( they may or may not be present ) and evaluations evaluate the exchange ( e . g . , the status of the goal achievement : positive , negative , satisfying . . . ) . 
Things can be a bit more complex since initiatives  , reactions and evaluations may not be a mere collection of dialogue acts but rather a collaborative process  . This is why exchanges may also have these il locutionary functions attached to them  . 
In oral humanmachine interactions , it is crucial that evaluations can be performed by both user and system  . Evaluating an exchange means verifying its completion  , i . e . , whether the underlying intention ( goal ) is reached or not . 
Therefore evaluations are of prime importance since the main side effect is that whenever the two diatogue es agree implicitly  ( a simple evaluation ) or explicitly ( an evaluative exchange ) then the evaluated exchange can be closed ( and thus all information exchanged in it can be certified as shared by both dialoguees  )  . 
? Dialogue acts are the basic components of inte rventions  . Dialogue acts ( as interventions ) are monological units : they are performed by one participant as the result of an autonomous process  , hi one intervention ( say move ) one cart perform more than one dialogue acts . At least one expresses the illocutionary function of the intervention  , it is called the main act . Dialogue acts are actions with preconditions and effects  . We describe them in tile next section . 
From this hierarchical description , one can build a structure that dynamically represent she current state of the conversation  . It is called the dialogue structure . This object is continuously updated as the dialogue goes on  . The dialogue structnre may be thought as a tree where leaves  2 a short cutmsay " interventions that have an initiative illocutionary function "  . 
ACl'ES DECOLING-92 , NANTES , 2328 AOtn'1992800 PRO(: . Or COLING-92 . NAr CrEs , AUG .  2328 ,   1992 dialogueact label:rcq-fnr-spellmg dialogue act owner : system structural preconditions : S =\ [  . . . \[ E , i(s ) , r(u ) , \[ EEv , i(s ) , contest ( u ) Jl . . . J & E1Ev is a currently open exchange structural effects : S = l  . . . \[ E , i(s) , r(u ) , \[ EEv , i(s ) , contest ( u ) , \[ E2v , rcq-lor-spelling(s)\]l\] . . . \]_F . ig . 2 : a system dialogue act definition are dialogue acts uttered by both speakers  , and nodes are interventions , exchanges arid transactions ( ee figure 4 for the representation of a dialoguexcerpt )  . 
3 DIALO GUEACTS ASRULES
Dialogue acts come from the wellknown theory of speech acts  . We agree with Bunt , however , that a dialogueact must be defined with respect o the modifications on the context \[ Bunt  89\]  . An act is then tittered when the context fits the conditions associated to it  . In turn , the production of an act modifies the context . Therefore , a dialogue act is a function which transforms a context into a new one  . For Bunt , the context is the description of both dialogue participants ' mental states : their knowledge  , suspicions and beliefs . 
However , some contextual aspects are difficult to encapsulate in a pure attitude model representation  , especially those coming from structural indicators  , denoted in the dialogue structure . Therefore , our notion of the context is Bunt's plus the dialogue structure \[ Bilange  91a  \] . The advantage of this approach is that some dialogue acts can be triggered if and only if certain patterns are present in the dialogue structure  . This naturally captures the fact that performing dialogue acts must respect structural constraints and dialogue norms  . 
So , dialogue acts are triggered when certain conditions are met  . These conditions are of two kinds : structural and/or nonstructural  . A structural precondition enforcestire presert ce  ( or absence ) of a certain pattern in the dialogue structure for the act  , if triggered . A nonstructural precondition is tied to the mental states of dialogue participants : task goals to achieve  , mutual believes . . . 
Figure 2 presents an example of a system dialogue act which has only structural precond it on s and effects  . 
S denotes the dialogue structure . E denotes an exchange , made up here of one initiative ( i(s )) , one reaction ( r ( s ) ) and one evaluative xchange Ev E t . This evaluative x change is in turn made up of one initiative and one reaction that is composed of one dialogue act : contest  .   ( " s " and " u " denote the system and the user resp  . ) . 
From there , the system dialogueactreq-for-spelling is triggered when an evaluation has been uttered by the system and that evaluation is contested by the user  ( the system'sew duation opens an evaluative x change  ( EE " )  , thus it is an initiative and the user's contest is the reaction to that initiative  )  . It is of course possible to define other dialogue acts based on the same idea : another act may be triggered when there are two  , or three embedded evaluative x changes instead of only one  . It should be noticed that for req-for-spelling it is not necessary to have nonstructural preconditions and effects  . Typically , only structural evidences mesufficient otrigger this act  . This is what characterizes dialogue control acts . 
4 HANI ) LING COMMUNICATION
FAILURES 4 . 2 Fa i lure prevent ion with feedback As said earlier  , evahmtion purpose is mainly to close an exchange in providing a feedback on the outcome of the exchange intention  . 
Ewduations are optional in essence , however as a festrategy for the system consists in using this opportunity to make clear what it understood  . 
One can perfom ~ an evaluation in several ways : e it herira explicitly checking one's understanding with a request for an acknowledgment or implicitly with a mereecho  . The first solution blocks the conversation on , achtrification whereas the second allows both dialogue participants to continue the convers at ion in moving to another topic  . 
Obviously , the first behaviour is less risky for the system since the user may contest the evaluation anyway  . However , the second behaviour is more natural and fluid . Therefore , we endowed the system with the capacity of using both behaviours with a preference for the second  . Basically , in the oral context , the system makes its choices on the basis of AcrEsDE  COLING-92  , NANTES , 2328 AOt ~\['1992801 PROC . OVCOLING-92, NANTES , AUG . 2328, 1992 acoustic . scores 3 . Three different behaviours are defined , based on the distribution of scores among three categories : high  , average , and low . 
? Low scores : only the evaluation is performed ; ? Average scores : the evaluation is performed and the opening of a new exchange is allowed  . An example is given with S : t ( see the dialogue below )  , where the evaluation concerns the destination and date  ( parameters obtained in the first exchange of the dialogue  ) and a new exchange is opened ( the one conceming the solution )  . 
? High scores : similar to the average score case . However , the system can generate two acts that can be merged in the same sentence which can  , in some circumstances , strengthen the naturalness of the system's output  . If the score were high in our dialogue ,   $2 would have been : " there is a flight to Rome which takes of fat  10  . 30 on
Tuesday , is that ok ?"
S1Flight reservation system . Formulate your requesl . 
UII'd like to go to Bonnon next Tuesday morning.
$2 Rome next Tuesday , there is a flight which lakes off at 10 . 30, is that ok ?
U2 No I want to go to BONN $3ok , Bonn . There is a flight . . . 
Whatever the scores are the system , while performing an evaluation , systematically predicts a possible user contest  . These predictions are precise since the system knows exactly where and on what information contests can occur  . U2 , for example , has been predicted and the prediction says that if the user contests the arrival city it is out of question to recognize the same value  ( i . e . , Rome ) . Moreover , the system knows that if the user accepts an evaluation then the evaluated information is certified as shared  ( implicitly )  . This is the case of the departure date in our example  ( one can notice that the acceptance is not explicit  , this is discussed in the next section ) . This is why in $3 , the system has to confirm only the departure city  . 
Scores are not the only information used by the system to plan its behaviour  . The system can evaluate the degree of risk when merging evaluations with other acts  . in our example ,   $2 is considered as risky since there are simultaneously at wo fold evaluation  ( city and date )  , a topic shift and a transaction shift ( from problem formulation to problem resolution )  . 
3 More precisely on a combination f acoustic scores and the perplexity  . 
The transaction shift is risky since the system closes a transaction where some parameters are not yet confirmed and the evaluation is also risky since correctly recognizing a contest means recognizing on what the contest is about between two possibilities  . However , $3 is less risky . 
The evaluation principles enumerated above with the notion of risk in one utterance provide a good help for preventing failures in a very ergonomic fashion  . This technique is well perceived by the majority of tested users  . 
4 . 2 S t ruc tura l detect ion of some fa i lu res In this section we illustrate how the structure of the conversation helps the system to detect failure situations  . 
Figure 3 ( next page ) shows two dialogues that differ only because of a failure in the second one  . The structures of these dialogues are presented on the right hand side  . 
The system hastentatively opened a new exchange about the departure date  , but before doing so , it has uttered an evaluation to close the previous exchange by echoing what it believes the departure and arrival cities are  . At this stage , two possible continuations are : ? the user answers the question about the date  ; this means that she implicitly agrees one the system's evaluation  . Et can then be closed ; ? the user utters a disagreement about the evaluation  . 
These possible continuations are shown in figure  3  . In the case of the user's contest ( continuation 1I )  , the system's evaluation becomes the initiative of an evaluative x change  ( EE ' ) and E2 is postponed . The shape of the dialogue structure is typical in such a case of failure  . This leads to the idea that one could examine the dialogue structure to detect communication fai lures and to trigger appropriate repair strategies  . 
Precisely , through dialogueact definitions , the system detects failures in triggering dialogue control acts  . From now , implementing a repair strategy is easily done in adding new acts  . 
Actually , in the Sundial system a situation like the one in continuation II is treated as follow : the system triggers are q-for-spelling  ( see the preconditions in figure 2 )  . This strong dialogue control act permits the system to send very accurate predictions  , telling the speech un-AcrEsDECOLING-92 , NAMES , 2328 Aot ~ r1992802 P~OC . OFCOLING-92, NANTES . AUo . 23-2g , 1992
St Formulate you request
U1I would like ~ ogoto Luton '
S2S ~ Paris Luton
S~when would you like to leave ?
U2 November the 30th
S1 Formulate you request
U1I would like Iogoto Luton
S2S ~ Paris London
S~when would you like to leave ?
U2 No Purls LUTON
CONTINUATION 1
IE\[lsl Formulate your request
E 1 \[ Ru Ii would like to go to Luton\[E vsl Paris Luton  E0  \[  Is2 wl .   .   .   .   .   .   .   . ld you like to I .   .   .   . ?2\[Ru2 November the 30th
CONTINUATION il
IF lsl Formulate your request/RU 1 I would like to go to l . uton
El/Flsl Pari ~ london
F , ~2'\] F . 2\[Is2wl . . .   .   .   . ould you like to I .   .   .   .  ?
Fie .   3: Two nossibl ctm tinuations derstanding layer that the user is about to the mam ~ of ~~ it Y  ( with forbiddencities : the one misunderstood before  )  . It has been observed that oral spelling is robust iff the speech understanding layer tries to recognize the input with a specific grammar which is done in the Sundial speech understand ing component  . So this strategy offers a very robust approach that can be easily generalized to proper names  . 
UI would like to go to Lt non
S2 Paris London when would like to leave ?
U2 No Paris Luton
S3 Could you spell the arrival city plc~s e ?
U3L,U,T,O,N_S4SoLu~n . . And about he date?
Fi ~, .4: Ar ~ pair seouence
Figure 4 shows one actual dialogue obtained with Sundial with this technique  . In this dialogue , one can observe that the system has temporarily focused on the communication problem and once it is solved  , it reintroduces the departure date topic . 
We have examined here some possibilities of preventing and repairing failures in intensively taking into account the dialogue structure  , specially at lhclevel of dialogue act definitions  . 
Dialogue control acts arc of prime importance for obtaining accurate predictions that indeed help the speechtm derstanding layer  . 
5 ACCE PTABILITY OF THE
SEMANTICINPUT
We examine now some cases in which a pragmatically doubtful input can be rejected by the diaktgue manager with the help of structural evidences  . Let us first examine the following scellario : During its turn  , the system has evaluated an exchange E 1 and opened a new one E2  . It is now the turn of the user ( this situation is similar to continuation 1 in . /igure 3 be jore U2) . 
A system initiative may be of two types : ( i ) an initiative such that the user can implicitly react  ,   ( ii ) an initiative such that the user can only perform an explicit reaction  . 
Figure 5 provides an example where the system's initiative in  E2 is of type ( ii )  . 
The last user's input seems quite surprising.
S1 Formulaie you request ~'
U1I would like to go to Luton/E1
S2S ~ Paris Luton Eo
S2 when would you like to leave ?
U2I needaticket for the return LE2
Is 1Formulate your request
RUl Iwt Juld like to go to Luton
EVs IParis Luton\[1S2wi .   .   .   .   .   .   . Idy , , uliket , , I .   .   .   . ?\[ RIj2 November the 30th
Fi ~.5:A wrun ~
A c'r ~ DECOLING-92 , NAN'rES , 2328 AO~r 1992803 PROC . OFCOLING-92, NANTES , AUG .  2328 ,   1992 dialogueact label : initiative dialogue act owner : user structural preconditions : there is no currently open exchange of the form IE  , i ( s ) \] such that i ( s ) is of type ( ii ) and other preconditions structural effects : an exchange of the form \[ E  , i ( u ) l is added in the curren transaction and other effects Fie  . 6: a skeleton for user's initi~aive definitions The user is actually supposed to react to the system's initiative in  E2 or to the evaluation of El , or both . U2 is a complete topic shift ( not related to the problem formulation of the one -way-the curren transaction -  )  . From the system point of view , the most natural interpretation is that a recognition failure most probably occurred  . This structural aspect ( which captures normative evidences of the conversation  ) allows the inhibition of some user's initiatives interpretation when there exists  , somewhere in the dialogue structure , a non-answered system's initiative of type ( ii ) . This leads to the general definition of user's initiatives presented in figure  6  . 
Conversely , if the system initiative is of type ( i ) , like in figure 7 , the user's input can be accepted . 
So , once an input has been rejected , the system must enter a repair process . In the case given in figure 5 , the real user's utterance could be an answer on the departure date or a contesto the evaluation as well  . The strategy is then to ask the user to repeat without changing the situation  ( excep that the system remembers that there was a failure  . If the failure continues then other strong control can be perform such as connect to a human operator  )  . 

SA t wh at time would you like to leave ?\]
UI9 p . m . '\[$29 p . m . , there is flight BA 123 . . . is that ok ?\[( initiative of type i ) I
U21 needaticket for the return I ( acceptable user initiative ) I
Fit , .   7: a user initiative after a system initiative of tvve  ( i ) as effects , which allows us to capture nom~ative and natural aspects of task-oriented dialogues  . 
We have studied and exploited these capacities for at least a small set of possibilities  . This approach has to be enriched to cover mores ituations  . Clearly , this approach is complementary to the ones based on pure attitude models of both dialogue participants and this is where our system should been larged too  . 
The optimistic on clusion is to say that with the SUNDIAL system  , dialogues never totally fail : failure/repair sequences often occur but at least the conversation always ends to the result envisaged by the user  . This is what we observed after having tested a range of  20 naive users who were generally ( around 90% ) satisfied of the dialogues thay had with the system  . 
6 CONCLUSION
The structural model of the conversation t , sed in the Sundial system offers great capacities to deal with speech pitfalls  . 
We have presented here some techniques to both prevent and repair misunderstandings  . The benefit of the structure of the communication is to enrich  , in a practicable way , the notion of context usually based on mental attitudes  . This benefit allows to enrich dialogue act preconditions with structural patterns  , as well AC-q'ES DECOLING-92 , NANTES , 2328 AOt ~ r1992804 PROC , OFCOLING-92 , NANTES , AUG .  2328, 1992

Amalberti , R ., Carbonell , ~ N ., Falzon , P.
(1984 ) " Stratrgies de contrrled u dialogue en situation d ' interrogation trlrphonique "  , ira Communication Oralehzmune-machine , GALF-

Bilange , E .   ( 1991a ) " A Task Independent Oral Dialogue Model " , in Proceedings of the European ACL , Berlin , pp ,  8388 , April . 
Bilange , E .   ( 1991b ) " Modrlisation du dialogue oral personne-machine parune approche structurelle "  , PhD Thesis , Rennes I University , 

Bunt , H . C .   ( 1989 ) " Information dialogue as communicative action in relation to partner modelling and information processing "  , in The Structure of Multimodal Dialogues including voice  , D . Bouwhuis , M . Taylor , F . Nrel(eds ), pp . 119, North-Holland . 
Grosz , B . J , Sidner , C . L . (1986) " Attention , Intentions , and the structure of discourse " , in Computational Linguistics ,  123 , pp .  175-204,

Moeschler , J . (1989) Moddlisation du dialogue.
reprdsentation del ' inf ~ rence argumentative.
Hermes , Paris.
Ponamal6, M ., Bihmge , E ., Choukri , K.,
Soudaplatoff , S .   ( 1990 ) "A computer-aided approach to the design of an oral dialogue system "  , in Proceedings of the Eastern Multiconference , Nashville , Tennessee , April . 
ACRESDE COLING-92 , NANTES , 2328 Aot'n "1992805 PROC . OFCOLING-92, NANTES , AUG .  2328, 1992
