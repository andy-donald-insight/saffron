Web Semantics: Science, Services and Agents on the World Wide Web 1213 (2012) 6487

Contents lists available at SciVerse ScienceDirect

Web Semantics: Science, Services and Agents

on the World Wide Web

j o u r n a l h o m e p a g e : h t t p : / / w w w . e l s e v i e r . c o m / l o c a t e / w e b s e m

Contextualized knowledge repositories for the Semantic Web
Luciano Serafini a, Martin Homola a,b,

a Fondazione Bruno Kessler, Via Sommarive 18, 38123 Trento, Italy
b Comenius University, Faculty of Mathematics, Physics and Informatics, Mlynska dolina, 84248 Bratislava, Slovakia

a r t i c l e

i n f o

a b s t r a c t

Article history:
Available online 17 December 2011

Keywords:
Semantic Web
Knowledge representation
Description logics
Context

We propose Contextualized Knowledge Repository (CKR): an adaptation of the well studied theories of context for the Semantic Web. A CKR is composed of a set of OWL 2 knowledge bases, which are embedded in
a context by a set of qualifying attributes (time, space, topic, etc.) specifying the boundaries within which
the knowledge base is assumed to be true. Contexts of a CKR are organized by a hierarchical coverage rela-
tion, which enables an effective representation of knowledge and a flexible method for its reuse between
the contexts. The paper defines the syntax and the semantics of CKR; shows that concept satisfiability and
subsumption are decidable with the complexity upper bound of 2NEXPTIME, and it also provides a sound
and complete natural deduction calculus that serves to characterize the propagation of knowledge
between contexts.

O 2011 Elsevier B.V. All rights reserved.

1. Introduction

More and more ontologies and data-sets are being published
using the Semantic Web languages such as RDF and OWL. Especially under the recent Linked Open Data initiative, large knowledge sources such as DBpedia and Freebase, but also many
others were conceived and populated. It is also becoming increasingly apparent that large portions of the knowledge available
via these sources are not absolute, but instead they are assumed
to hold under certain circumstances. Knowledge may be relative
to certain time period, a geo-political or geo-cultural region,
or certain specific topics, etc. Despite these facts, there is a lack
of a widely accepted mechanism to qualify knowledge with the
context in which it is supposed to hold. Instead, contextual information is often crafted in the ontology identifier or in attributes
like rdfs : comment; owl : AnnotationProperty which do not affect
reasoning.

Extensions of the Semantic Web languages with specific mechanisms that allow to qualify knowledge, e.g., w.r.t. its provenance
[1] or w.r.t. time and events [2], were proposed. Among other
works that offer possible solutions [35], the most interesting are
ALCALC [6] and Metaview [7], however, a widely accepted approach has not yet been reached.

On the other hand, theories of context have been investigated
for years in the fields of artificial intelligence and knowledge rep-
resentation. In his seminal paper [8] McCarthy suggested to for-

 Corresponding author at: Comenius University, Faculty of Mathematics, Physics

and Informatics, Mlynska dolina, 84248 Bratislava, Slovakia.

E-mail

addresses:

serafin@fbk.eu

(L.

Serafini),

homola@fmph.uniba.sk

(M. Homola).

1570-8268/$ - see front matter O 2011 Elsevier B.V. All rights reserved.
doi:10.1016/j.websem.2011.12.003

malize context in terms of first-class objects and utilize it in
reasoning. Further research lead to introduction of the context as
a box metaphor [9,10] for suitable representations of contexts. In
this approach, each context is a set of formulae which hold under
the same circumstances and whose boundaries are delimited by
a set of dimensional attributes. The two kinds of knowledge involved here are separated, the knowledge itself is inside the
box and the contextual meta knowledge is outside. In addition,
Lenat [11] proposed to organize the contexts into a hierarchical
structure called contextual space based on the values of their
dimensions.

To clarify the representational requirements for a contextual
representation framework for the Semantic Web let us consider
the following scenario. Suppose we want to represent knowledge
about Football (FB), FIFA world cups (FWC), national football leagues (NFL), world news (WN), and national news (NN). Suppose
also that all the information about FWC and NFL should be included in FB, and that for each nation, all the facts about its NFL
should be included in its NN, and also all the information about
FWC should be included in WN. On the other hand, only a part of
information about NFL should be included in WN (only that of
worldwide interest). A well designed contextual representation
formalism should support the following requirements:

Knowledge about context: Knowledge about contexts such as
contextual dimensions and relations between contexts as for
instance that one context is more specific than some other,
should be explicitly represented and reasoned about. For exam-
ple, we should be able to assert that the context of FWC in 2010
is more specific than the contexts of FB and WN in the same
year.

Contextually bounded facts: In each context we should be able
to state facts with local effect that do not necessarily propagate
everywhere. For example, an axiom like a player is a member
of only one team should be true in some contexts (e.g., FWC,
NFL, for each year) but not in more general contexts like FB.
Reuse/lifting of facts: To be able to seamlessly reuse the information contained in more specific contexts. For example, the
facts in FWC should be lifted up into WN and FB. This lifting
should be done without spoiling locality of knowledge.
Overlapping and varying domains: Objects can be present in
multiple contexts, but not necessarily in all contexts, e.g., a
player can exist in both the FWC context and in the NFL con-
texts, but many players present in NFL will not be present in
FWC.
Inconsistency tolerance: Two contexts may possibly contain
contradicting facts. For instance NN of Italy could assert that
Cassano is the best player of the world, while at the same
time the world news report that Rooney is the best player of
the world, without making the whole system inconsistent.
Complexity invariance: The qualification of knowledge by context should not increase the complexity.

Based on these requirements, we propose a framework called
Contextualized Knowledge Repository (CKR), build on top of the
expressive description logic SROIQ [12] that is behind OWL 2
[13]. The CKR framework is tailored for the Semantic Web, but it
is rooted in the foundations of contextual knowledge representation laid down by previous research in artificial
intelligence.
Adopting the context as a box paradigm, a CKR knowledge base
is composed of units, called contexts, each qualified by a set of
dimensional attributes that specify its contextual boundaries. Contexts are organized by a hierarchical coverage relation that regulates the propagation of knowledge between them.

After brief preliminaries (Section 2) the paper defines the syntax and semantics of CKR (Section 3); then it provides a sound
and complete natural deduction calculus that serves to characterize the propagation of knowledge between contexts (Section 4);
and finally it shows that concept satisfiability and subsumption
are decidable with the complexity upper bound of 2NEXPTIME, i.e.,
same as for SROIQ (Section 5); related work is then discussed
and concluding remarks added in Sections 6 and 7. Detailed proofs
of all statements are attached in Appendix.

2. Preliminaries

The CKR framework is built on top of the SROIQ DL [12] which
is used as the local language of contexts. This language constitutes
the logical foundation of OWL 2 [13] and it is currently the most
expressive language relevant to the Semantic Web. In this section,
we briefly introduce the necessary DL preliminaries. For more details the reader is referred to the works of Horrocks et al. [12] and
Baader et al. [14]. Although semantically CKR is able to handle the
full SROIQ DL, in order to achieve decidability of reasoning we
will slightly limit its expressive power as we shall see below.

A DL vocabulary R 14 NC ] NR ] NI is a set of symbols composed
of three mutually disjoint countably infinite subsets: the set NC of
atomic concepts including the top concept > and the bottom concept ?, the set NR of atomic roles including the universal role U and
the identity role I, and the set NI of individuals.

Complex concepts (complex roles) are recursively defined as the
smallest set containing all concepts (roles) that can be inductively
constructed using the concept (role) constructors in Table 1, where
A is any atomic concept, C and D are any concepts, P and R are any
atomic roles, S and Q are any (possibly complex) roles, a and b are
any individuals, and n stands for any positive integer.

Table 1
Syntax and semantics of SROIQ.

Concept constructors

Atomic concept
Complement
Intersection
Existential restriction

Self restriction
Min. card. restriction

Nominal

Role constructors

Atomic role
Inverse role
Role composition

Axioms

Concept inclusion (GCI)
Role inclusion (RIA)
Reflexivity assertion
Role disjointness
Concept assertion
Role assertion
Negated role assertion

Syntax

:C
C u D
9R:C

9R:Self
P nR:C

{a}

Syntax

R
S  Q
Syntax
C v D
S v R
RefR
DisP; R
Ca
Ra; b
:Ra; b

^ y 2 CI
hx; xi 2 RI

Semantics

DI n CI

CI \ DI

x 2 DI 9yhx; yi 2 RI

x 2 DI
x 2 DI #fyjhx; yi 2 RI
^ y 2 CIg P n
faIg
Semantics

fhy; xi j hx; yi 2 RIg
SI  QI
Semantics

RI is reflexive
PI \ RI 14 ;
aI 2 CI
haI ; bIi 2 RI
haI ; bIi R RI

# DI
# RI

A SROIQ knowledge base K 14 T ;R; A

i consists of a TBox T
which contains GCI axioms; an RBox R which contains RIA axioms,
reflexivity and role disjointness axioms; and an ABox A which contains assertions. The syntax of all axioms is shown at the bottom of
Table 1. The closure v
R of the RBox R is defined as follows: if
R v Q 2 R and Q 1  Q  Q 2 v S 2 R then Q 1  R  Q 2 vR S; and
v
R is the transitive and reflexive closure on vR.
A DL interpretation is a pair I 14 DI ;	I
where DI is a set called
interpretation domain and 	I is the interpretation function which
provides denotations for individuals, concepts and roles.
In
SROIQ, as much as in any classical DL, DI is required to be non-
empty. We will see later on that in CKR we will relax from this
requirement. The interpretation function 	I assigns an element aI
of DI to each individual a, a subset CI of DI to each concept C, and
a subset RI of the product DI 
 DI to each role R. In addition for
any complex concept and role the respective semantic constraint
listed in Table 1 must be satisfied by 	I , plus >I 14 DI ;
?I 14 ;; UI 14 DI 
 DI , and II 14 f x; xh
ijx 2 DIg.1 An axiom / is satisfied by an interpretation I (denoted I DL /) if I satisfies the respective semantic constraint listed in Table 1. An interpretation I is a
model of K (denoted I DL K) if it satisfies all axioms of K.

Only simple roles are allowed in the min cardinality restriction,
in the self restriction constructors, as well as in the reflexivity and
the disjointness axioms. Simple roles are defined recursively as fol-
lows: (a) atomic role is simple if it does not occur on the right-hand
side of a RIA in R; (b) an inverse role R is simple if R is simple; and
(c) if R occurs on the right-hand side of a RIA in R and each such
RIA is of the from S v R where S is a simple role, than R is also sim-
ple. Also the universal role U is not allowed on the left-hand side of
RIA axioms.
There are additional SROIQ constructors and axioms [12]. Spe-
cifically, concept constructors C t D; 8R:C; 6 nR:C and 14 nR:C, and
RBox axioms SymR; TraR; IrrR. Although we occasionally use
some of them to simplify the notation, they are all fully reducible2

1 The identity role I is not originally part of SROIQ [12], however it can be easily
introduced as syntactic sugar by adding the axioms > v 9I: Self and > v : P 2I:>.
2 C t D reduces into ::C u :D; 8R:C reduces into :9R::C; 6 nR:C reduces into
: P n  1R:C; 14 nR:C reduces into P nR:C u : P n  1R:C; SymR reduces into
R v R; TraR reduces into R  R v R; IrrR reduces into 9R:Self v ?.

L. Serafini, M. Homola / Web Semantics: Science, Services and Agents on the World Wide Web 1213 (2012) 6487

into the core constructs listed in Table 1 which allows us to leave
them out when laying out the theoretical foundation of CKR. Note
that also RefR is reducible, but only in cases when R is simple
(i.e., by replacing it with > v 9R:Self).

Two basic reasoning tasks for SROIQ and for any DL are concept satisfiability, the task to decide for a given (possibly complex)
concept C whether there is a model I of K such that CI is non-
empty; and entailment, the task to decide for some axiom /
whether I DL / for all models I of K (which is then denoted by
K DL /). These two tasks are known to be inter-reducible
[12,14]. A tableaux algorithm that decides these two tasks for
SROIQ was given by Horrocks et al. [12]. The algorithm, however,
requires further syntactic restrictions on the language, as discussed
below.

(b) R v R;

It is required that the RBox is regular, which is defined as follows [12]. A regular order on roles  is a strict partial order (i.e.,
a transitive and irreflexive binary relation) on roles such that
S  R iff S  R for any roles S; R. Given a regular order on roles
, a RIA is -regular if it has one of the following forms: (a)
R  R v R;
(c) S1  . . .  Sn v R and Si  R for
1 6 i 6 n; (d) R  S1  . . .  Sn v R and Si  R for 1 6 i 6 n; and
(e) S1  . . .  Sn  R v R and Si  R for 1 6 i 6 n. An RBox R is regular if there exists a regular order  on its roles such that all RIA of
R are -regular.

SROIQ is decidable for knowledge bases with regular RBox.
This is because the restriction assures the existence of a regular
automaton corresponding to the language generated by the RBox,
which is then used by the tableaux algorithm [12]. More recently
an alternative condition called RBox stratification was introduced
by Kazakov [15]. Given a preorder (a transitive and reflexive binary
relation) - on roles, let RgS if R - S and S - R, and let R  S if R - S
and not R g S. A RIA R1  . . .  Rn v R is --admissible if Ri - R for
1 6 i 6 n. Given a set of --admissible RIA R a RIA Q v S is --strat-
ified in R, if for every R such that RgS and Q 14 Q 1  R  Q 2 there
R P and P  Q 2v
exists P such that Q 1  R v
RS. Finally, R is stratified if there is some preorder - on R such that every RIA of R is --
admissible and every RIA R v S such that R v
R S is --stratified in
R.

Stratification is less restrictive then regularity, i.e., every regular
RBox R can be extended into a stratified RBox R0 modulo-R-equiv-
alent to R, but not vice versa [15]. As also showed by Kazakov [15],
for deciding satisfiability and entailment with respect to a SROIQ
knowledge base with stratified RBox it is possible to use the same
tableaux algorithm introduced by Horrocks et al. [12]. This is because the existence of the regular automaton required by the algorithm is also assured for stratified RBoxes. In order to show
decidability of reasoning in CKR we will rely on this result. In addi-
tion, we will slightly limit the expressive power of SROIQ as the
local language: disjointness axioms DisR; S will be excluded from
CKR and role reflexivity axioms RefR will only be allowed if R is
simple. Therefore the DL on which CKR is built can be described
as almost full SROIQ. We deem this to be a reasonable sacrifice
in the expressivity of the local language that allows us to achieve
the contextualized representation of knowledge that is enabled
by CKR.

3. Contextualized knowledge repository

A CKR is composed of a set of contexts. Following the context as
a box metaphor [9], a context contains a set of logical statements
and it is qualified by a set of contextual attributes, also called
dimensions. An example of this type of representation is shown in
Fig. 1 where an excerpt from a context representing the Italian national football league in 2010 is depicted.

Fig. 1. Italian national football league under the context as a box metaphor.

It is apparent from this simple example, that there are two layers in this kind of representation, the knowledge itself (we will call
this layer the object knowledge) and the data about the knowledge
(which we will call meta knowledge). McCarthy [8] proposed to
use an unique language for both types of knowledge, namely quantified modal logic. While this is very powerful from the representational perspective (e.g., the structure of context may be inferred
out of the object knowledge, etc.), it easily leads to undecidability.
At the opposite extreme there are approaches such as multi-con-
text systems [16], distributed [17] or package-based description
logics [18], where the context structure is fixed and it is not possible to specify knowledge about contexts, which limits their practical applicability. We therefore propose an intermediate approach,
by allowing to specify the context structure and properties in a
(simple) logical meta language, but avoiding to mix it with the object language used within each context in order to maintain good
computational properties. In our approach, the meta knowledge
influences the object knowledge (in terms of logical consequence)
but not vice versa.

3.1. Language of contextual representation

In CKR, contextual attributes are specified in the meta language,
with vocabulary called the meta vocabulary. The content of each
context is specified in the object language, with vocabulary called
the object vocabulary. Both of these languages will be DL. The meta
vocabulary contains a specific set of symbols in order to identify
contexts and to assign dimensional values to contexts. It contains
a distinguished set of individuals that will be used as context iden-
tifiers. Each dimension is represented by a dedicated role A that
will be used to assign dimensional values to the contexts, a set of
admissible dimensional values DA which are individuals, and a role
A which will be used to model the cover relation between dimensional values.

Definition 1 (Meta vocabulary). A meta vocabulary C is a DL
vocabulary that contains:

1. a set of individuals called context identifiers;
2. a finite set of roles A called dimensions;
3. a set of individuals DA called dimensional values, for every
4. a role A, called coverage relation, for every dimension A 2 A.

dimension A 2 A;

The number of dimensions k 14 jAj is assumed to be a fixed con-
stant. This will be important in order not to introduce an additional
complexity blow up. Also, relevant research on contextual dimensions suggests that their number is usually very limited [11]. The
meta assertions of the form AC; d for a context identifier C and
some d 2 DA (e.g., timec0; 2010), state that the value of the dimension A of the context C is d. The meta assertions of the form dAe
(e.g., ItalyspaceEurope)3 state that the value d of the dimension A is

3 To improve legibility we will use infix notation for the coverage relations, e.g., we
will equivalently use dAe instead of Ad; e.

covered by the value e. Depending on the dimension, the coverage
relation has different intuitive meanings, e.g., if A is space then the
coverage relation is topological containment, if A is topic then it is topic specificity. It is of course up to the modeller to pick and represent
the dimensional coverage appropriately.
The meta vocabulary allows us to construct dimensional vectors
of the form fAi1 :14 d1; . . . ; Ain :14 dng which are composed of attri-
bute-value declarations such that each Aik
is a dimension of C
and each dk is a value from DAik
. In accordance with the context
as a box paradigm, dimensional vectors will be used to identify
each context by a specific set of dimensional values. They are either
full, if a value for each dimension in A is given, or partial, if some
dimensions are missing. The set of all full dimensional vectors of
C forms the dimensional space in which contexts will be located.

Definition 2 (Dimensional space). Given a meta vocabulary C with
n dimensions A 14 fA1; . . . ; Ang, let us define:

1. a full dimensional vector in C is a set of attribute-value declarations d 14 fA1 :14 d1; . . . c; An :14 dng such that dk 2 DAk for every k
with 1 6 k 6 n;

2. a partial dimensional vector in C is a set of attribute-value dec-
that
and

Aim :14 dmg
k with 1 6 k 6 m,

dB 14 fAi1 :14 d1; . . . c;
every

such

for

larations
0 6 m 6 n; dk 2 DAik
B 14 fAi1 ; . . . c; Aimg  A;

dimensional vectors in C;

3. DC, the dimensional space respective to C, is the set of all full
4. dB  eC, the completion of dB w.r.t. eC, given two partial dimen-
to

equal

and

is

eC,

sional
dB [ fAik :14 dk 2 eCjAik R Bg.

vectors

dB

We use bold Latin letters d; e; f, etc. to denote dimensional vec-
tors. Given a dimensional vector d and A 2 A, we denote by dA the
value assigned to A in d (i.e., such that A :14 dA 2 d). If d is partial
and it does not contain a value for A, then dA is undefined. Analogously for vectors denoted by e; f, etc. Observe that in fact for
any full dimensional vector d, and any subset of dimensions
B # A, a partial dimensional vector dB is obtained by projection of
d with respect to the dimensions in B (i.e., dB 14 fB :14 dBjB 2 Bg).
By definition dA 14 d. Note that the empty dimensional vector fg is
also a partial dimensional vector in C.

One may object that for encoding a set of attributes with structured value-sets in the meta knowledge, such a powerful formalism as DL may be unnecessary. Several examples using simply
ordered sets are found in the literature [5,19,20]. We have however
intentionally chosen DL, as this brings the option to employ reasoning also at the meta level. As the dimensional values are normal
DL individuals, one may assign them into classes and express
constraints on them. Consider for instance the location dimension
corresponding to geographical regions. One may sort the values
into classes such as Country; City; CapitalCity, etc., and require
e.g. Country v 9
location:CapitalCity, that is that every country has a
capital city as its subregion. One may further notice that for those
contexts which have an instance of City assigned as the value of the
location dimension, there may possibly be a large part of shared
knowledge, especially axioms at the TBox level. In such a case it
might be useful to group all these axioms into some kind of a context class (we have investigated this in our previous work [21] and
implemented context classes in our prototype implementation).
This line of research is beyond the scope of this paper, but it justifies DL as our choice of meta language. In addition, in Section 5 we
show that the complexity of reasoning with CKR is in the same
class as for the object language (i.e., 2NEXPTIME in case of SROIQ).
Inside the contexts, knowledge is encoded using the object
vocabulary. This is again a DL-vocabulary. While the object vocabulary is shared between all contexts in a CKR knowledge base, the

symbols may have different interpretation in different contexts.
This is very natural when modeling contextualized information.
For instance, in the context of FIFA WC 2010 the concept Finalist
represents the finalist teams of the FIFA WC 2010, while in the context of FIFA WC 2006, the same concept represents the finalists of
the 2006 edition of FIFA WC. Locality, however, does not imply
opacity. When information propagates across contexts, we need a
way to refer to the specific interpretation of a symbol in a remote
context. To be able to do this, we introduce so called qualified symbols into the object vocabulary. These are symbols with a dimensional vector in subscript which indicates with respect to which
context the symbol should be interpreted.

Definition 3 (Object vocabulary). Let C be a meta vocabulary.
Given any DL-vocabulary RB, an object vocabulary R is an
extension of RB such that for every concept/role symbol X in RB
(including >; U; I, but excluding ?), and for every dimensional
vector d (full or partial), R contains the concept/role symbol Xd.

An object vocabulary R is possibly constructed on top of any DLvocabulary RB. In such a case, RB is called the base-vocabulary of R.
Any symbol from R n RB is called qualified symbol. Concepts and
roles of RB are non-qualified, but they can also be perceived as
qualified with respect to the empty dimensional vector fg. If no
ambiguity arises, we skip the brackets and the attribute names,
so instead of e.g. Xflocation:14Italy;time:142010g we will write XItaly;2010, etc.
Qualified symbols will be given a special interpretation by the
CKR semantics, but they are used just like any other concept/role
symbols. For instance, in the context of football 20052010 one
would like to define the concept TopTeam as the set of teams that
reached the final phase in at least one edition of the FIFA WC in the
last 5 years (note that FIFA WC is run every 4 years). Given the
dimensional value FWC for the topic FIFA World Cup and
2006; 2010, etc. for years, the concept TopTeam can be defined with
the following axiom:
TopTeam  FinalistFWC;2010 t FinalistFWC;2006

Such an approach is reminiscent of the knowledge qualification
and unqualification operations (also context push and pop) as
known from the literature [9]. These operations allow for a statement to be popped out of the context, preserving its meaning, by
modifying it to make the contextual parameters explicit. Or in
the opposite direction, a qualified statement can be pushed inside
a context and some of its qualifying parameters stripped. Later on
we will formalize these operations in the CKR framework using a
special operator called the @ operator.

3.2. Syntax of CKR

A context is a unit of knowledge, from which a CKR knowledge
base is composed. Each context has an identifier, a set of dimensional attributes, one for each dimension, which are respective to
some meta vocabulary C, and it features a DL knowledge base over
some object vocabulary R.

Definition 4 (Context). Given a meta vocabulary C and an object
vocabulary R, a context on hC; Ri is a triple hC; dimC; KCi where:

1. C is a context identifier of C;
2. dimC is a full dimensional vector of DC;
3. KC is a SROIQ knowledge base over R.

Note that while symbols appearing inside contexts can possibly
be qualified with partial dimensional vectors, dimC, the dimen-

L. Serafini, M. Homola / Web Semantics: Science, Services and Agents on the World Wide Web 1213 (2012) 6487

sional vector on which the context C resides, is always a full dimensional vector in DC. We use the notation Cd to denote a context
with dimC 14 d.

Finally, a CKR knowledge base is composed of a collection of
contexts and an additional DL knowledge base over the meta
vocabulary which will be called meta knowledge. The meta knowledge assigns dimensional values to each context and it also asserts
a hierarchical organization of contexts, which will be called context coverage. This hierarchy is recorded by asserting a strict partial order on the dimensional values of each dimensional
attribute A 2 A using the role A.

Definition 5 (Contextualized Knowledge Repository). Let C be a
meta vocabulary and let R be an object vocabulary. A Contextualized Knowledge Repository (CKR) on hC; Ri is a pair K 14 hM; Ci
such that:

1. C is a set of contexts on hC; Ri;
2. M, called meta knowledge, is a DL knowledge base on C such

that:
(a) every A 2 A is declared a functional role;
(b) for every C 2 C with dimC 14 d and for every A 2 A we have
(c) for every A 2 A, the relation fdAd0jM  Ad; d0g is a strict

M  AC; dA;

partial order on DA.

To indicate that a formula / belongs to a context Cd of a CKR K
we will often write d : / instead of just /. Similarly, by the notation
d : / 2 K we mean that / 2 Cd, where Cd is a context of K; and by
K [ fd : /g (K n fd : /g we denote a new CKR constructed by adding / to Cd (respectively subtracting it).
Note that functional roles required by the definition above are
quite common in DL (SHIF and all more expressive logics).
Although this is not so common, in SROIQ (and therefore in
OWL 2) it is possible to implement also strict partial order of the
dimensional coverage (particularly, by asserting TraA and
IrrA). On the other hand, in simpler logics it is possible to assure
appropriate structure of the dimensions simply by enumerating
the coverage in the ABox. The order is required to ensure a
reasonable hierarchical organization of the contexts in a CKR
knowledge base.
In expressive logics we are able to verify
the order automatically. If the logic is not expressive enough, we
can still organize the knowledge base and verify the order extralogically (e.g., we can use some other programmatic means for
that). Therefore CKR may indeed be built with simpler, more
tractable logics: an RDFS-based version has already been developed [22].

The coverage relation between the dimensional values of each
dimension encoded in the meta knowledge provides the base for
the coverage between dimensional vectors and contexts. One
dimensional vector covers another, if its dimensional values cover the values of the other, one by one. That is, the coverage between dimensional vectors () is a product of the dimensional
order relations A. One context covers another if the same holds
for their associated dimensional vectors. We will also introduce
a handy notation for coverage with respect to a subset of dimensions only (B).
i with dimensions
Definition 6 (Coverage). Given a CKR K on C; Rh
A, given any dimension A 2 A and any two dimensional values
d; d0 2 DA, given any two dimensional vectors d and e (full or
partial), any subset B # A, and given any two contexts C and C0 we
say that:

1. d covers d0 w.r.t. A (denoted dAd0) if M  Ad; d0; we denote

by dAd0 if d  Ad0 or M  d 14 d0;

2. e covers d w.r.t. B (denoted dBe) if dBBeB for all B 2 B and
dBBeB at least for one B 2 B; we denote by dB e if dBe or
M  dB 14 eB for all B 2 B;
3. e covers d (denoted d  e) if dAe; we denote by d  e if dAe;
4. C0 covers C (denoted C  C0) if dimC  dimC0; we denote by

C  C0 if dimC  dimC0:

Note that d  e implies that d and e are defined on the same set
of dimensions. If dBe, then d and e may be defined on a different
set of dimensions but both must be defined on all dimensions of
B # A.

Intuitively, if one context covers another, its perspective is
broader. For instance, the context concerned with football in general would cover the contexts of FIFA World Cup and contexts concerned with national football leagues. To give an example, let us
now formally model the coverage relation for the contexts described in the introduction. We will have the topic dimension with
the following values in Dtopic: FB (football), FWC (FIFA World Cup),
NFL (National football league), WN (world news), NN (national
news). The space dimension will have the values world; africa and
italy in Dspace. The time dimension will have only one value 2010.
The following coverage between the dimensional values will be asserted in the ABox of M:
FWCtopicWN NFLtopicFB africaspaceworld
FWCtopicFB NFLtopicNN italyspaceworld:
The fact that the FWC is covered by WN in this example is due to
world news report on the World Cup together with other topics,
therefore this context is broader. Similarly for NFL and NN. The context coverage relation generated from this coverage between
dimensional values is shown in Fig. 2.

3.3. Semantics of CKR

The semantics of CKR relies on the DL semantics inside each
context (local semantics), while the relations between the contexts
are handled by some additional semantic conditions. Local interpretation and local models are like standard DL-interpretations
and models with two notable exceptions: empty domains are al-
lowed; and, while all contexts in a CKR share a common object
vocabulary R, not every symbol of R needs to be interpreted by
each local interpretation. This will be especially true in case of individuals which may but also may not be meaningful in a given
context.

Definition 7 (Local Interpretation). Given a CKR K over hC; Ri with
R 14 NC ] NR ] NI, and a context Cd of K, a pair I d 14 hDd;	I di is a
local interpretation of Cd if:

1. either Dd 14 ;;
2. or there exists N0

R0 14 NC ] NR ] N0
I.

I # NI s.t. I d is a DL-interpretation over

Note that for any complex concept or role X; XI d is defined only
if it is defined also for every individual occurring in X. In the follow-
ing, whenever we write XI d then we also mean that I d is defined
for X. Observe in the definition below, that in a local model I d of

Fig. 2. Coverage relation between contexts.

Cd; I d is necessarily defined on every individual actually occurring
in Cd. It may be defined on some individuals in addition due to the
semantic relations between contexts.

Definition 8 (Local Model). Given a CKR K, a context Cd of K, a local
interpretation I d is a local model of Cd (denoted I d DL Cd) if
I d DL / for every axiom / 2 KCd.

Note that the local interpretation with empty domain trivially
satisfies any TBox or RBox axiom (e.g., C v D is satisfied because
both CI d 14 ; and DI d 14 ; if Dd 14 ;). Therefore such an interpretation is always a model of any context that does not explicitly contain individuals. On the other hand, if at least one individual is
contained inside a context then such an interpretation is no longer
a model.

In a CKR model,

A model of a CKR knowledge base is a collection of local models,
one for each context, which are bound together by further semantic conditions in order to take into account relations between con-
texts.
local domains may possibly overlap,
reflecting the fact that the contexts may possibly describe same
things from a different perspective. Local domains will be organized in accordance with the coverage hierarchy. In addition special attention is given to individuals, which are interpreted
equally if they occur in two contexts that share a common super-
context, and the meaning for the qualified concepts and roles is
provided.

Definition 9 (CKR Model). A model of a CKR K is a collection
I 14 fI dgd2DC of local models such that for all d; e, and f, for every
atomic concept A, atomic role R, atomic concept/role X and
individual a:

1. >dI f #>eI f if d  e,
2. AfI d #>fI d ,
3. RfI d #>fI d 
 >fI d ,
4. aI e 14 aI d ; given d  e; either if aI d is defined; or aI e is
defined and aI e 2 Dd,
5. XdBI e 14 XdBeI e ,
6. XdI e 14 XdI d if d  e,
7. AfI d 14 AfI e \ Dd if d  e,
8. RfI d 14 RfI e \ Dd 
 Dd if d  e,
9. I d DL Cd.

Let us now explain the semantic constraints imposed in CKR
models passing through the conditions of the definition one by
one.

Condition 1. Given Cd  Ce, the perspective of Cd is narrower
than of Ce and vice versa the perspective of Ce is broader than
of Cd. Condition 1 implements this in the semantics. It has
two practical consequences: Firstly, together with Conditions
5 and 6 it implies that Dd is required to be a subset of De in
any CKR model if d  e. This follows as indicated above the 14
and # relations:
Dd 14 >I d 145>I d

e 145>I e 14 De:

d 146>I e

1 >I e

d #

This is a basic premise in order to make the knowledge of Cd
accessible to Ce by the latter constraints.
The second consequence of Condition 1 is that if Cd  Ce, then
any other context Cf
is aware of this in the sense that
>I f
d #>I f
e . This allows for some basic desirable properties of reasoning about the knowledge of other contexts. For instance, in
any context it is entailed that >FWC;2010;Africa v >FB;2010;World (given
that FWC  FB and Africa  World). Hence if an individual is
known to belong to the context of FIFA WC 2010, we always

know that it also belongs to the context of football of the same
year.
Conditions 2 and 3 take care that in every context Cd the interpretations of symbols qualified with some f are roofed under
the concept >f which thus represents the domain of Cf as
viewed inside Cd and in a CKR model >I d
represents the image
that I d keeps of Df. That is for instance TeamFWC;2010;Africa
v >FWC;2010;Africa holds in any context. Or if a qualified role such
as hasPlayerFWC;2010;Africa occurs in some context, it is assured by
the semantics that all its possible values are always instances
of >FWC;2010;Africa, i.e., individuals that are known to occur in
CFWC;2010;Africa.
As implied by further conditions the image of Df in Cd (i.e., the
set >I d
f ) may be but as well may not be entirely precise, depending on how Cd and Cf are related by the coverage. As we learned
from Eq. (1), this image is necessarily precise in cases when
d  f. In the opposite case, the image of the domain of a
super-context is a narrowing of the original domain (i.e.,
>I d
f # Df if d  f). If neither d  f nor f  d then the image is
even less precise and there can be elements in >I d
f which do
not belong to Df at all.
Condition 4 is responsible for the semantic treatment of indiIf a narrower context Cd is covered by a
viduals in CKR.
broader context Ce, and an individual a is defined in both of
these contexts, then the interpretation of a must be equal in
both of these contexts. This is assured by propagating the
semantics of a from Cd into Ce, but not necessarily the other
way around: if aI d is defined then aI e must be defined and
must be equal to I e; on the other hand, if aI e is defined then
aI d must be defined to the same value only if aI e is part of the
Ces image of >d.
One practical consequence of this treatment is that if the same
individual a occurs in two context which share at least one
common super-context,
the same interpretation.
Another consequence is that it allows to predicate about
(non)existence of objects in a context from a broader context.
For instance if >FWC;2010;AfricaEngland and :>FWC;2010;AfricaEgypt
are stated in a context broader than CFWC;2010;Africa (e.g.,
in
CFB;2010;World), as a consequence it is implied that England participates in the last FIFA WC while Egypt does not. That is, on the
semantic level the individual England is always defined in this
context while the individual Egypt is always undefined in it.
Condition 5 provides meaning for partially qualified symbols. It
assures that the values for attributes which are not specified are
always taken from the current context in which the expression
appears. Therefore in the end all symbols even those partially
qualified are treated as fully qualified by the semantics. It is
important to understand that also symbols with no qualifying
vectors are viewed as qualified symbols, they are qualified with
the empty dimensional vector fg. Their qualification is taken
from the context in which they appear and they are thenceforth
treated as fully qualified by the semantics.
Due to this kind of treatment, partially qualified symbols are in
fact some syntactic sugar added to the framework, for instance,
instead of CoachFB;World we can equivalently use CoachFB;2010;World
inside CFWC;2010;Africa and instead of playsFor we can equivalently
use playsForFWC;2010;Africa in the very same context. On the other
hand, we consider partially qualified symbols necessary in
order to achieve practical usability of the framework.
Condition 6, 7, and 8 provide semantics for qualified symbols.
It is ensured that the meaning of a symbol Xd is based on its
interpretation in Cd as much as the partially overlapping
domains allow. Therefore the propagation of knowledge is
respective to the hierarchy of contexts as follows.
Condition 6 states that the interpretation of Xd is strictly bound
to XI d in all contexts that cover Cd. This is indeed possible due to

it has

L. Serafini, M. Homola / Web Semantics: Science, Services and Agents on the World Wide Web 1213 (2012) 6487

the fact that Dd is totally contained the interpretation domains
of all such contexts, which is assured by Condition 1. For exam-
ple, the interpretation of TeamFWC;2010;Africa in ChFB;2010;Worldi is the
same as the interpretation of Team in the context ChFWC;2010;Africai.
Conditions 7 and 8 assure that given Cd  Ce and a symbol Xf,
where f is not necessarily related to d or e, the two interpretations of Xf in I d and I e are equal modulo the interpretation
domain of the narrower context Dd. This especially implies that
if a particular individual (or pair of individuals if X is a role)
occurs in both contexts Cd and Ce, then it ether belongs to both
XI d
f and XI e
f or it belongs to none of them. Consider our example
CKR from Fig. 2. In this CKR the contexts Cwn (the context of
world news 2010) and Cf (the context of football in 2010) are
unrelated. Therefore if a qualified concept Playerf occurs inside
Cwn we cannot be sure that all its instances belong to the
domain of Cf. Due to Condition 7 however, the interpretations
assigned to Playerf by Cwn and Cwc must agree as much as the
(because wc  wn).
partially overlapping domains permit
Similarly, as wc  f, the interpretations assigned to Playerf by
Cwc and Cf must agree as much as the domains permit. Hence
if one of the instances of Playerf in Cwn is a constant Rooney,
which also appears in Cwc, then due to Condition 7 we have that
RooneyI e 2 Dwc and we already showed that Dwc # Df in Eq. (1).
For further details see Examples 13 where we study some
basic properties of such a semantics.
Condition 9 states that in a CKR model, the local interpretation
I d of each context Cd is also a model of Cd according to the local
semantics, i.e., that of DL.

The two classic reasoning tasks for DL are satisfiability of concepts and entailment (especially of subsumption formulae) with
respect to a knowledge base. In a CKR model, a formula may be satisfied in one context but in another it may be unsatisfied. In addi-
tion, for some contexts in a knowledge base, all admissible CKR
models may have a local model with empty domain whereas for
other contexts there may be CKR models with non-empty local do-
main. Therefore given a CKR K one has to specify with respect to
which context the reasoning task in question is to be evaluated.
Such reasoning tasks will be called d-satisfiability of concepts
and d-entailment.

Definition 10 (d-satisfiability of concepts). Given a CKR knowledge
i with d 2 DC and a concept C over R, we say that
base K over C; Rh
C is d-satisfiable w.r.t. K if there exists a CKR model I 14 fI ege2DC
of K such that CI d  ;.

Definition 11 (d-entailment). Given a CKR knowledge base K over
i with d 2 DC and any formula / over R with syntax listed in
C; Rh
Table 1 under Axioms, we say that / is d-entailed by K (denoted by
K  d : /) if for every CKR model I 14 fI ege2DC
of K we have
I d DL /.

In addition, we consider satisfiability of a CKR knowledge base
as a decision task. In this case it makes sense to define d-satisfia-
bility as well as global satisfiability.

Definition 12 (d-satisfiability). A CKR knowledge base K over
i with d 2 DC is said to be d-satisfiable if there exists a CKR
C; Rh
model I 14 fI ege2DC of K such that Dd

 ;.

As usual with DL, the d-entailment (of concept subsumption)
and d-(un)satisfiability are inter-reducible: K  d : C v D iff
C u :D is not d-satisfiable w.r.t. K; on the other hand, C is d-satisfi-
able w.r.t. K iff K 2 d : C v ?. In addition, C is d-satisfiable w.r.t. K
iff K [ fd : Cag is d-satisfiable where a is a new constant previously unused in K. This follows from the fact that local models
are all valid SROIQ models and from the fact that the reduction
holds in SROIQ. For details on these reductions see for instance
the DL Handbook by Baader et al. [14].

4. Reasoning in CKR

In this section we provide a characterization of entailment in
CKR in terms of a natural deduction (ND) calculus [23]. CKR entailment is the product of two orthogonal semantic entailments: local
entailment and cross-context entailment, The former is induced by
the local semantics and coincides with entailment in SROIQ;
the latter is induced by the constraints that Definition 9 imposes
on each pair of contexts related via coverage. SROIQ entailment,
i.e., /1; . . . ; /n DL /, is known to be decidable.4 We therefore assume a black box decision procedure that checks if /1; . . . ; /n DL /.
Reasoning rules in the ND calculus allow to deduce conclusions
in one of the contexts based on evidence from other contexts, they
are therefore a kind of bridge rules [16]. As an example consider the
following simple bridge rule:
d : A v B d  e

e : Ad v Bd
The rule implies that whenever A v B is true in a context Cd
such that d  e, then Ad v Bd should be true in Ce. This is indeed
sound thanks to Conditions 5 and 6 of Definition 9 which together impose that in any CKR model I the interpretation of A
and B in I d coincide respectively with the interpretations of Ad
and Bd in I e.
The rationale of rule (2) is that a statement in a narrower con-
text, namely Cd, can be embedded into a larger context, namely Ce,
by applying a transformation that preserves semantics. We generalize this idea by introducing the notion of embedding between DL
knowledge bases and by showing that in CKR such embedding preserves the meaning of SROIQ expressions.

4.1. Embedding of DL knowledge bases

A DL embedding is a mapping that embeds a DL knowledge base
with a narrower perspective into another one with a broader per-
spective. The vocabulary of the context being embedded splits in
two parts: Rc that contains symbols which are completely specified
with respect to the embedded context, and Re that contains the
remaining symbols which are called external. For instance, the symbol Playersports is external in the context CFB;2010;World, This is because
FB  sports. If we state the axiom Playersports v 9:playsFor:Team here,
it is only valid in this context where all the players are football players and football is a team sport. In other sports such as tennis players
need not have to play for a team. Therefore, when embedding the axiom into the broader context of sports we need to take care to embed
the proper meaning of the axiom it has in FB and so we need to pay
attention to external symbols.

Definition 14 (DL embedding). Let R and R0 be two DL alphabets,
and let R be partitioned into two disjoint sets Rc and Re with
> 2 Rc. A DL embedding is a total function f : R ! R0 that maps

Definition 13 (Global satisfiability). A CKR knowledge base K
over C; Rh
i is said to globally satisfiable if there exists a CKR
model I 14 fI dgd2DC
of K such that for every d 2 DC we have
Dd

 ;.

4 Decidability is guaranteed under the assumption that the knowledge base is
stratified (see [15] for more details), and we have to impose this condition also for
CKR. This point is discussed later.

Table 2
DL-embedding on complex expressions and axioms.

if A 2 Rc
if A 2 Re

if R 2 Rc
if R 2 Re

f> u fA
fI  fR  fI

f A 14 fA
f R 14 fR
f :C 14 f> u :f C
f ? 14?
f R 14 fR
f R  S 14 f R  f S

f C u D 14 f C u f D
f 9R:C 14 9fR:f C
f 9R:Self 14 9fR:Self
f PnR:C 14 PnfR:f C
f fag 14 ffag

f> u 9fR:f C

f> u 9fR:Self
f>u PnfR:f C

if R 2 Rc
if R 2 Re
if R 2 Rc
if R 2 Re

if R 2 Rc
if R 2 Re

f Ca 14 f Cfa
f Ra; b 14 fRfa; fb
f :Ra; b 14 :fRfa; fb
f C v D 14 f C v f D
f R v S 14 f R v fS
f a 14 b 14 fa 14 fb
f a  b 14 fa  fb

individuals, atomic concepts, and atomic roles of R to individuals,
atomic concepts, and atomic roles of R0 respectively. The extension
f  of f that maps complex expressions and axioms over R into
complex expressions and axioms over R0 is defined as given in
Table 2.

The DL embedding is done on the syntactic level. On the semantic level, if one knowledge base is embedded into another, we
should be able to embed models of the former knowledge base
to the models of the latter. A pair of such models is said to be complying with the embedding.

Definition 15 (Embedding-complying interpretations). Two DLinterpretations I and I0 of R and R0 respectively comply with the
DL embedding f if:

, for each individual a of R such that aI is defined;
, for each concept/role X 2 Rc;

1. aI 14 faI0
2. XI 14 fXI0
3. AI 14 fAI0 \ f>I0
4. RI 14 fRI0 \ f>I0 
 f>I0

, for each concept A 2 Re;

, for each role R 2 Re.

If two interpretations I and I0 comply with the embedding f
then I0 is apparently an extension of I. It contains the domain D
of I as D 14 f>I0
# D0 and the f-images of all internal symbols of
Rc are interpreted inside f>I0
. The images of external symbols
of Re can possibly exceed f>I0
when interpreted in I0 but we
corresponding
can always
of
their pre-images by restriction to f>I0
. This corresponds to
the fact that the symbols external to R are not completely specified in I.

interpretations

obtain the

An important point is that the meaning of any symbol, internal
or external, with respect to I can always be retained from I0. The
following lemma shows that this is also true for complex descriptions composed of a mixture of internal and external symbols and
as a consequence also the meaning of axioms is preserved.

Lemma 1. If two DL-interpretations I and I0 comply with the
embedding f : R ! R0, then, for every concept C; CI 14 f CI0
, for
every role R; RI 14 f RI0
, and for every axiom /; I  / iff
I0  f /.

Proof (Sketch). Full proof is listed in A.1. The first claim of the
lemma, concerned with concepts and roles, is proved by struc-
tural
induction. The base case (i.e., for atomic concepts and
roles) follows from the fact that the interpretations I and I0
comply with the embedding f (Definition 15). For every type of
complex concept and role we then have to argue the claim from
the induction hypothesis, from the construction of f  (Table 2),
and from basic properties of DL-interpretations. The second
claim of the lemma that is concerned with axioms is then
proved for each type of axioms, mostly as a consequence of
the first claim. h

Armed with this result we will now show that given any CKR
K and any two contexts Cd and Ce such that d  e it is possible
to construct a DL-embedding between Cd and Ce. For conve-

nience we will call this embedding the @d operator. For any construct / the embedded value will be /@d. The operator will
allow us to characterize the knowledge propagation in CKR along
the two basic axes, from narrower to broader context and vice
versa. Later on in Section 5 we will find another use for embed-
dings, when showing how CKR can be reduced into a regular DL
knowledge base.

Definition 16 (@d operator). For every full dimensional vector d,
the operator 	@d is defined as f 
d	, where fd is an embedding
from R into itself defined as follows:

 fda 14 a for every individual a;

 fd X0
dB
 Rc 14 X0

; Re 14 R n Rc.

14 Xd0
dB 2 Rjd0

Bd for every concept/role X;

B  dB

For

instance if

the concept Team occurs

in Cd with
d 14 fFWC; 2010; Africag, it belongs to Rc as d0
B  dB for B 14 ;. Hence
Team@d 14 TeamFWC;2010;Africa. This is natural, as in a context wider
than Cd the concept TeamFWC;2010;Africa is fully defined by Team in
Cd. But NationalTeamFB R Rc as FB  FWC. Hence we have
NationalTeamFB@d 14 NationalTeamFB;2010;Africa u >FWC;2010;Africa.
Intui-
tively, in order to embed NationalTeamFB from Cd into a broader
context one must restrict it to >FWC;2010;Africa because its interpretation in the broader context may be broader.

Lemma 2. Given a CKR K with two contexts Cd and Ce such that
d  e, and given any model I of K, the pair of local interpretations I d
and I e complies with the embedding fd respective to the operator @d.

Proof. Let K be a CKR over hC; Ri. Let Cd; Ce be two contexts of K
such that d  e. Let the @d operator be defined on the embedding
fd : R ! R as given in Definition 16,
is, we have
B  dBg and Re 14 R n Rc. We need to show that all
Rc 14 fXd0
four conditions of Definition 15 are satisfied:

2 Rjd0

that

B  dB. If d0

B 14 dB then Y d0

this follows from the Condition 4 of Definition 9;

1. aI d 14 fdaI e, for each individual a of R such that aI d is defined:
2. XI d 14 fdXI e , for each concept/role X 2 Rc. In this case X 14 Y d0
for some d0
Bd 14 Y d and the proposition
follows either trivially if d 14 e or directly from Condition 6 if
d  e. Now assume that d0
B  dB. From Definition 9 we have
14 YI d
Bd 14 YI e
XI d 14 YI d
Bd (Condition 5), and YI d
Bd because

d0
d0
d0
d0

d0
B  d  d  e (Condition 6). Finally, from the construction of
Bd 14 fd Y d0
fd; YI e
d0
3. AI d 14 fdAI e \ fd>I e , for each concept A 2 Re; In this case
with d0
9 we
have
From Definition
14 BI d
Bd 14 BI e
Bd \ Dd (Condi-
Bd (Condition 5), and BI d
d0
d0
d0
(Condition 5, then Condition
d 14 fdBdBI e\

A 14 Bd0
AI d 14 BI d
d0

tion 7). As Dd 14 >I d 14 >I d
6), we
fd>I e 14 fdAI e \ fd>I e from the construction of fd;

Bd \ Dd 14 BI e
Bd \ >I e
BI e
d0
d0

I e 14 fdXI e;

d 14 >I e

B  dB.

finally

get

L. Serafini, M. Homola / Web Semantics: Science, Services and Agents on the World Wide Web 1213 (2012) 6487

Table 3
CKR Inference rules.

d : /1 . . . d : /n f/1 . . . /ng  /

d : /

LReas

d :? a
e : > v ? Bot

d  e

f : Ad v >e

f : 9Rd> v >d

d : A t Bx 12d : Ax
e : /
e : /

12d : Bx

e : /

t E

d : 9R:Ax 12d : Rx; y; d : Aye : /

e : /

9E

f : > v 8Rd>d
12d : >a
d : > v ?
d : > v ? aE

Top

e : /@d e : >da1 		 	 e : >dan d  e

d : /

Push

d : / d  e
e : /@d Pop

d :P nR:Ax 12d : yi

 yj; d : Rx; yi; d : Ayi16i  j6n

e : /

e : /

P nE

Restrictions: (1) LReas can be applied if every individual occurring in / occurs in a /i for some 1 6 i 6 n; (2) in the Push rule a1; . . . ; an are assumed to be all individuals
occurring in /; (3) the individuals a; y, and yi; 1 6 i 6 n, occurring in aE; 9E, and P nE are new, not occurring elsewhere in K and the proof apart from the assumptions
discharded by these rules.

4. RI d 14 fdRI e \ fd>I e 
 fd>I e , for each role R 2 Re: this case is
exactly analogous to the previous one, only we need to use Condition 8 instead of Condition 7 of Definition 9 which is concerned with roles. h

4.2. ND calculus for CKR

We now briefly introduce natural deduction (ND), for more details see the work of Prawitz [23]. An ND calculus is a set of inference rules of the form:

a1

12Bn1
. . . an an1

12Bnm
. . . anm

with n; m P 0, where for all i; ai and a are formulae, Bi are sets
of formulae. The formulae ai are the premises of q; a is the con-
clusion, and Bi are the assumptions discharged by q. A deduction
of a depending on a set of formulae U is a tree rooted in a inductively constructed starting from a set of assumptions included in
U by applying the inference rules. Formally deduction is defined
by induction:

1. a formula a is a deduction of a depending on fag;
2. if for each 1 6 i 6 n  m; Pi is a deduction of ai depending on

Ui and the calculus contains the rule (3), then

P1 . . . Pnm

is a deduction of a depending on

i141Ui

i14n1 Ui n Bi
nm


A formula a is derivable from U if there is a deduction of a
depending on a subset of U. a is provable if it is derivable form
the empty set.

A ND system for a CKR K 14 hM; Ci over hC; Ri is shown in Table
3. The premises of the ND rules of our calculus are either object formulae of the form d : / where d 2 DC and / is a DL formula over R,
or meta formulae l over C. Conclusions and discharged assumptions are always object formulae.

Definition 17 (Derivability in CKR). Given a CKR K 14 hM; Ci over
hC; Ri and a set of object formulae U, an object formula d : / is
derivable from K and U (denoted by K; U  d : /) if it is derivable in
the calculus given in Table 3 from the set W which contains the
following formulae:

1. e : v, for every v 2 Ce and for every e 2 DC;
2. l, for every meta formula such that M DL l;
3. w, for all w 2 U.

Instead of K;;  d : / we simply write K  d : /. Even if ND derivations are formally defined as trees, we will often present them

as a sequence of derivation steps. This can be naturally achieved,
we only have to track the set of premises from which the resulting
formula in each step is derived. Hereafter  always denotes this
calculus as formally defined by Definition 17, and whenever we
say proof calculus or just calculus, we refer exactly to this calculus.
The proof calculus allows us to define the syntactic notion of d-
consistence of a CKR knowledge base.

Definition 18 (d-consistence). A CKR K is d-consistent if it is not
possible to prove d : > v ? by the calculus, i.e., if K 0 d : > v ?.
Otherwise K is d-inconsistent.

The first main result of this work is presented in Theorem 1
where the calculus is showed to be a sound and complete characterization of logical consequence in CKR. In other words, the calculus rules show us how logical consequence is propagated between
contexts in a CKR knowledge base.

Theorem 1 (Soundness and Completeness). For every CKR K over
C; Rh
i, for every d 2 DC, and for every formula / over R; K  d : / if
and only if K  d : /.

Proof (Sketch). The full proof is attached in A.2. The soundness is
proved by showing for each rule that it is sound, i.e., that starting
from valid premises it only derives valid conclusions.

In order to prove the completeness we make use of the
reductions between reasoning tasks. For any formula d : /, a CKR
K0 can be constructed such that K  d : / if and only if K0 is d-
unsatisfiable. We therefore prove, that if K0
is d-unsatisfiable
then a proof exists in the CKR calculus that K0 is d-inconsistent.
This guarantees, that whenever K  d : / then there exists a
calculus proof that supports this. The implication  if K0 is d-
unsatisfiable then the calculus proves that K0 is d-inconsistent 
is proven by contraposition, i.e., we prove that if there is no
calculus proof concluding that K0 is d-inconsistent then it is d-
satisfiable. This is proved by a variant of the Henkin construction
of a model based on constants (see e.g. [24]). For details see
Appendix. h

Let us show some examples of deductions in CKR. Consider the
CKR with structure depicted in Fig. 2. Example 1 shows how
knowledge is propagated from Cwc into Ci via the common supercontext Cf, and Example 2 shows how knowledge is propagated
from Cwn into Cf via the common sub-context Cwc. Finally Example
3 shows how contradicting knowledge can coexist in different separated context.

Example 1. The following deduction shows how the subsumption
wc : WChamp v Player propagates from the FIFA WC context Cwc to
the Italian National League context Ci. Notice that the result of this
deduction, i.e., i : WChampwc v Playerwc, in the context Ci is weaker
than the premise as it holds only on the set of players of the Italian

National League. In other words, the knowledge shifting from Cwc to
Ci is limited by the domain of interpretation of Ci.

(1)
(2)
(3)
(4)
(5)
(6)

wc : WChamp v Player
f : WChamp v Player@wc
f : WChampwc v Playerwc
f : WChampwc u >i v Playerwc u >i
f : WChampwc v Playerwc@i
i : WChampwc v Playerwc

premise
Pop, wc  f
by @
LReas
by @
Push, i  f

Example 2. The following deduction shows how wn : Playerf v Pro
(i.e., every football player mentioned in the world news is a
professional) propagates from Cwn to Cf, trough the common subcontext Cwc.

(1)
(2)
(3)
(4)
(5)
(6)
(7)

wn : Playerf v Pro
wn : Playerf v Pro@wn
wn : Playerf v Prown
wn : Playerf u >wc v Prown u >wc
wc : Playerf v Prown
f : Playerf u >wc v Prown u >wc
f : Playerf u >wc v Prown

premise
Pop, wn  wn
by @
by LReas
Push, wc  wn
Pop; wc  f
LReas

Notice that we did not infer f : Playerf v Prown, i.e., that every
single player of football is understood as a professional player in
the world news, but the fact that this subsumption holds only for
the players of the FIFA world cup domain.

Example 3. Suppose that the Italian News context Cin contains the
facts that Rooney does not take part to the Italian league in 2010,
i.e., :>iRooney, and that he is not considered a good football player,
i.e., :GoodPlayerfRooney. Suppose also that the world news context
Cwn contains the opposite evaluation, i.e., GoodPlayerfRooney. In the
CKR of Fig. 2, these two contradicting statements do not necessarily
lead to inconsistency. Indeed, to derive inconsistency one has to find
a context where to combine the two contradicting facts. However, to
transfer the facts wn : GoodPlayerfRooney and in : :GoodPlayerf
Rooney into a common context, one has to pass through Ci. But
the fact that Rooney is not an individual of Ci disables any inference
about Rooney in Ci. Model-theoretically we admit CKR models where
RooneyI wn  RooneyI in .

common super-context of Cd and Ce. It shows that the mere existence of a common super-context enables communication from
Cd to Ce.

Property 1 (Communication via a common super-context). In
every CKR K with two contexts Cd; Ce that share a common supercontext Cf, we have:
K  d : A v B ) K  e : Ad v Bd:
Proof. Proof in the ND calculus:

(1)
(2)
(3)
(4)

d : A v B
f : Ad v Bd
f : Ad u >e v Bd u >e 14 Ad v Bd@e
e : Ad v Bd

14 A v B@d

Premise
Pop; d  f
LReas
Push; e  f h

Notice that in order to enable the communication between Cd
and Ce, the mere presence of a common super-context is required.
This will work even if, as in Fig. 3(a), the super-context is empty.
One may ask whether the common super-context Cf is a symmetric channel which induces also the inverse communication, i.e.,
does the subsumption Ad v Bd if entailed in Ce propagate back to
Cd in the form A v B. This is not the case, it is proven by the counter
model I, in which: Dd \ De 14 ;, Df 14 Dd [ De; AI d 14 Dd and BI d 14 ;.
d 14 ;. Hence
By the conditions of Definition 9 we have that AI e
we have found a model that satisfies e : Ad v Bd but not d : A v B.
If in a CKR K; Cf  Cd and Cf  Ce then we call Cf a common
sub-context of Cd and Ce. This situation is dual to the previous case.
We have already outlined this situation in Example 2, and in
general it is depicted in Fig. 3(b). We will see that to some extent
communication between two contexts is also induced by a
common sub-context. In this case, however, the domain of the
common sub-context comes into play and effectively restricts the
amount of information that can be communicated.

d 14 BI e

Property 2 (Communication via a common sub-context). In every
CKR K with two contexts Cd; Ce that share a common sub-context Cf,
we have:

K  d : A v B ) K  e : Ad u >f v Bd u >f :

4.3. Properties of reasoning

Proof. Again we prove the claim by the ND calculus:

With help of the ND calculus we will be able to formulate
and prove some interesting properties of reasoning with CKR
knowledge bases. We will first examine the propagation of knowledge in CKR that is enabled by the qualified symbols. We will show
that it occurs only in contexts that are connected by the coverage
hierarchy. We will start by considering the basic cases of connected contexts.

Let us generalize the situation discussed in Example 1. Consider the CKR K represented in Fig. 3(a), composed of three contexts Cd; Ce and Cf such that d  f and e  f. We will call Cf a

(1)
(2)
(3)
(4)
(5)

d : A v B
d : Ad v Bd
d : Ad u >f v Bd u >f
f : Ad v Bd
e : Ad u >f v Bd u >f

14 C v D@d

14 Ad v Bd@f
14 Ad v Bd@f

Premise
Pop; d  d
LReas
Push; f  d
Pop; f  e h

Therefore we see that the amount of communication is effectively constrained by the domain of the common sub-context Cf.
We now show that the full amount of communication, as much
as in the case of common super-context, is not possible, i.e., the fact

(a)

(b)

Fig. 3. Basic knowledge propagation: (a) common super-context scheme; and (b) common sub-context scheme.

L. Serafini, M. Homola / Web Semantics: Science, Services and Agents on the World Wide Web 1213 (2012) 6487

that A v B is entailed in Cd does not imply Ad v Bd in Ce. Of course
this is under the assumption that there is no common supercontext shared by Cd and Ce. The claim is proved by a counterexample given by the following interpretation I of the CKR K:

 Dd 14 fx; yg,

 Df 14 fxg,

I dA 14 I dAd 14 fxg;
I dB 14 I dBd 14 fx; yg,
I d>f 14 fxg; I d>e 14 fx; yg;
I fAd 14 I fBd 14 fxg,
I f>d 14 I f>e 14 fxg;
I eAd 14 fx; zg; I eBd 14 fxg,
I e>f 14 fxg; I e>d 14 fx; zg.

 De 14 fx; zg,

Clearly, I satisfies Definition 9 and hence it is a model of K. But on
the other hand, AI e

d , that is to say, K 2 e : Ad v Bd.

d U BI e

Analogously to the previous case, Cf can be seen as a communication channel, in this case however Cf constitutes the intersection of Cd and Ce and allows to pass only knowledge within its
domain, which is contained in both domains of Cd and Ce.

We now proceed by showing how the two propagation patterns
described above, can be composed to define a general propagation
pattern between any pair of contexts in a CKR knowledge base that
are connected. Two context with dimensions d and e are connected
in K, if there is a sequence d 14 d1; . . . ; dn 14 e, with n P 1, and for
all 1 6 i < n either di  di1 or di  di1. The sequence d1; . . . ; dn
is called a path connecting Cd and Ce. For any 1 6 i 6 n; di is a minimum of d1; . . . ; dn if one of the following conditions holds:
1. i 14 1, and d1  d2,
2. i 14 n, and dn1  dn,
3. 1 < i < n and di1  di  di1.

nects them, they are called isolated contexts.

If for two contexts Cd and Ce of K there exists no path that conThe following property shows that if two contexts Cd and Ce are
not directly covered one by another but instead connected by a
path of multiple contexts, then still subsumptions entailed in Cd
at least partially propagate into Ce (and vice versa). The amount
of information that is propagated is effectively constrained by
the domains of those contexts which are minima on the path that
connects Cd and Ce.

Property 3. Given a CKR K with di1 ; . . . ; dik being all the minima of
the path d1; . . . ; dn connecting Cd with Ce. Then

d : A v B  e : Ad u w

16j6k>dij

v Bd u w

16j6k>dij

Proof (Sketch). The proof can be obtained by an iterative application of the two Properties 1 and 2. h

considered good players,

For instance, consider our example CKR depicted in Fig. 2. If in
the context of Italian news Cin it is asserted that all players of Inter
Milan are
axiom
9playsForf:fInter Milang v GoodPlayer, this subsumption propagates
9playsForf:fInter Milang u >i u >wc v GoodPlayerin
into
u>i u >wc, as the contexts Ci (Italian league) and Cwc (FIFA WC)
are the two minima on the path connecting Cwn to C2. As a consequence this subsumption will certainly apply in Cwn on all players
that participate to both FIFA WC and the Italian league.

e.g., by the

Cwn

as

Property 4. Let K 14 hM; Ci be a CKR over hC; Ri that is d-satisfiable
and for the context Cd 2 C there is no other Ce 2 C with d  e or
e  d.
any
Then
f 2 DC; f  d, and for any DL formula / over R we have:
K  f : / () K

construct K0 14 hM; C n fCdgi.

0  f : /:

Let

for

us

 given a model I

0 of K0 is constructed simply by

Proof (Sketch). The property is proven by establishing a one-to-one
correspondence between the models of K and K0 (disregarding Cd):
 given a model I of K, a model I
taking I and deleting I d from it;
and extending it with I d 14 ;;;h
empty domain), and by setting XI e
X and for every e 2 DC.
Therefore if I f  / in every model of K, also I0

0 of K0, a model I of K is constructed by taking I

i (i.e., the interpretation with
d 14 ; for every concept/role

f  / in every

model of K0 and vice versa. h

We can find another justification of Property 4 by inspecting the
calculus rules in Table 3. Apart from the Bot rule, no other rule enables transfer of consequence between context which are not directly related in terms of coverage. The Bot
rule is only
applicable if one context is inconsistent, therefore in fact no transfer of knowledge may possibly occur between two unconnected
contexts that are consistent.

As an important consequence of Condition 4 of Definition 9 we
will show that equality among individuals propagates across contexts if at least one of the individuals involved is defined in a common sub-context.

Property 5 (Propagation of equality). Given a CKR K over hC; Ri
with two contexts Cd, Ce sharing a common sub-context Cf, and given
two individuals a; b 2 R, the following holds:
K  d : a 14 b ^ K  f : >a ) K  e : a 14 b:

Proof. The proof again in the ND calculus

(1)
(2)
(3)
(4)
(5)
(6)
(7)
(8)

d : a 14 b
f : >a
d : >fa
d : >a
d : >da
d : >db
f : a 14 b
e : a 14 b

Premise
Premise
Pop; f  d
LReas
Pop; d  d
From (1) and (5) by LReas
From (1), (5), (6) and f  d by Push
Pop; f  e h

One of our desiderata in contextualized knowledge representation is certain inconsistency tolerance by the system. Inconsistency
should not necessarily pollute whole CKR if it occurs in one of the
contexts. Let us analyze the propagation of inconsistency in CKR.
As a direct consequence of Property 4, we have that inconsistency
does not propagate to contexts which are not connected with the
inconsistent part of the system.

Property 6. Let Cd and Ce be any two isolated context of a CKR K such
that K is e-consistent, and for no context Cf and for no individual
a 2 R we have K  f : ? a. Then:
K; d : > v ? 0 e : > v ?

On the other hand, if two contexts are not connected by any
path, they are totally independent. This is a simple consequence
of the following property.

Also, inconsistency does not necessarily propagate from a narrower context into a broader one, at least not until individuals
come into play.

Property 7. Let K be CKR such that for no context Cf we have
K  f :? a for any individual a 2 R. Then for any two contexts Cd and
Ce of K such that d  e we have:
K; d : > v ? 0 e : > v ? :

Proof. Consider a CKR K with two contexts Cd;Ce; d  e, with the
only axiom > v ? in Cd, and with Ce empty. The model I in which
I d 14 h;;;i and I e 14 hfxg; f> # fxg; ? # ;;>d
# ;gi is indeed a
model of K in which e : > v ? is not entailed. The property is
now a direct consequence of the soundness of the calculus. h

Thus we see that allowing local models with empty domains is
an important preposition in order to minimize inconsistency prop-
agation. On the other hand, if the inconsistency appears in a broader context Ce, it is pushed also into all contexts covered by Ce. This
is due to the fact that the empty domain of I e makes all domains
under Ce necessarily empty. We can also directly prove this by
the CKR calculus.

Property 8. Given a CKR K with two contexts Cd and Ce such that
d  e, we have:
K; e : > v ? d : > v ? :

Proof. First, we have K; e : > v ? e : >d v ? by LReas, and consecutively K; e : > v ? d : > v ? by Push. h

The inconsistency tolerance of a CKR knowledge base reaches
its limit as soon as individuals appear in one of the inconsistent
contexts. In such a case whole CKR becomes inconsistent.

Property 9. Let Cd and Ce be any contexts in a CKR K, we have that:
K; d : >a; d : > v ? e : > v ? :

Proof. By LReas we obtain K; d : >a; d : > v ? d : ? a. Consequently we have K; d : >a; d : > v ? e : > v ? by the Bot
rule. h

Model-theoretically speaking,

if an individual occurs in an
inconsistent context, not even the local interpretation with empty
domain qualifies for a local model. Hence there is no model for the
CKR, because it requires a local model for every context. In the calculus this situation is handled by the Bot rule, which is the only
rule applicable if there is an inconsistent context with an individual present, and also it is the only rule which propagates its conclusion arbitrarily, even to isolated contexts.

Finally, an inconsistent context with empty domain blocks the
communication. If Cd and Ce are connected through a path that
contains an inconsistent context Cf, then such a path does not contribute to the transfer of knowledge between Cd and Ce.
Property 10. Given a CKR K with two contexts Cd and Ce such that for
each path d1; . . . ; dn connecting Cd and Ce there is 1 < k < n such that
K  dk : > v ?, then for any two formulae /; w over R such that
K [ fd : /g is d-satisfiable, we have:

K; d : /  e : w () K  e : w

Proof (Sketch). Let P be a proof of e : / from K [ fd : /g. Let
p 14 d1 : /; . . . ; dn : w, where d1 14 d; dn 14 e be the path in P that
starts in the assumption node d : /, it follows the conclusions consecutively derived from d : /, and finally reaches e : w.

Observe first that the Bot rule was not applied anywhere on the
path p, because this would allow us to derive inconsistency in d
i.e., that K [ fd : /g is d-
but we assumed that the contrary,
satisfiable.

From the fact that the path p was constructed by rule
applications, and all calculus rules apart from Bot only allow to
derive a consequence in a context directly related by the coverage,
it follows that d1; . . . ; dn is a path in the CKR K. From the
assumptions, at least for one 1 < k < n such that K  dk : > v ?.
Therefore the subtree of P rooted in d1 : / can be replaced by
dk : /k since K  dk : /k by LReas. h

5. Decidability and complexity

Decidability of CKR entailment is proved indirectly by embedding CKR into a single DL knowledge base. To do this we reuse
the notion of embedding between DL knowledge bases as previously defined in Section 4.1. First we need a vocabulary that is robust enough to keep track of all semantic relations inside a CKR
knowledge base. Since each qualified symbol Xd may have different
meanings in different contexts, we need to introduce one version
Xe
d of the symbol per each context Ce. We know from the semantics
that non-qualified concept and role symbols have the same meaning as if qualified with respect to the context where they appear. In
addition, also constants may possibly have different meaning in
different contexts, therefore for each constant a we introduce a
version ae for each context Ce.
Definition 19 (Transformed vocabulary #C; R). Given a pair of
meta/object vocabularies hC; Ri, let RB 14 NB
I be the basevocabulary of R. Let us define a DL-vocabulary #C; R 14 #NC]
#NR ] #NI such that:

R ] NB

C ] NB

djA 2 NB
1. #NC 14 fAe
2. #NR 14 fRe
djR 2 NB
3. #NI 14 faeja 2 NB

C ^ d; e 2 DCg;
R ^ d; e 2 DCg [ fSd;e;f
I ^ e 2 DCg [ fundefg, where undef

jR 2 NB

where S is some new symbol not appearing in R;

symbol not appearing in R.

R ^ d; e; f 2 DCg,

is a new

The role symbols of the form Sd;e;f

R which we also added to #NR
are auxiliary and will be later used to maintain decidability of the
transformed knowledge base. In addition we have introduced a
new constant undef. This constant is needed because some of the
constants in CKR need not to be necessarily defined in all contexts.
This will be simulated by allowing some of the constants in #NI to
be equal to undef.
For each full dimensional vector d 2 DC, we now define an operator 	#d which will be based on an embedding gd of R into
#C; R.

Definition 20 (#d operator). Given a pair of meta/object vocabularies hC; Ri, for every full dimensional vector d 2 DC; 	#d is
d	, where gd is an embedding from R to #C; R
defined as g
defined as follows:

 gda 14 ad for every individual a;
 gdXfB 14 Xd
 Rc 14 R; Re 14 ;.

fBd for every concept/role XfB;

Observe that in this case the split of R into the internal part Rc
and the external part Re is different: Rc 14 R and Re 14 ;. This is in
line with the fact that the single DL knowledge base which is the
result of the transformation has complete information about all
symbols in every context. That is, in terms of CKR we could see
the transformed knowledge base as if placed on top of all contexts

L. Serafini, M. Homola / Web Semantics: Science, Services and Agents on the World Wide Web 1213 (2012) 6487

 

4. Rd

Sd;e;f

 
I 14 RI d
for every atomic role R of R and for every d; e 2 DC;
I 14 Id
f I for every role R and for all d; e; f 2 DC;

I  Re

with respect to the coverage . Using the 	#d operator we now
transform a CKR knowledge base K into a DL theory #K over
#C; R.

Definition 21 (Transformed CKR #K). For every CKR K over
hC; Ri, let #K be a DL knowledge base over #C; R such that for
every individual a, concept A, role R, concept/role X (all atomic),
and for any full dimensional vectors d; e; f it contains the following
axioms:

d v >f
e for d  e;
e v >d
e;
e :> v >d

1. >f
2. Ad
3. 9Rd
4. add the following three axioms5 (if the indicated condition is

e and > v 8Rd

e :>d
e;

true):
(a) >d
d u faeg v fadg if d  e;
b) fadg v fae; undefg if d  e;
c) :>d
dundef;
d  Xe
d if d  e;
d if d  e;
f u >d
f  Ae
f  Id
d v Rd
f v Sd;e;f

5. Xd
6. Ad
7. if d  e, add the following four axioms:

(a) Id
(b) Id

f v Re
f ,
d v Rd
 Id
f ;
8. /#d for all / 2 KC and d 14 dimC.

f and Rd
and Sd;e;f

d  Re
d  Re

The axioms added to #K in the previous definition correspond step-by-step to the conditions of Definition 9; in each step
we add axioms to deal with the respective condition. Step 5 is
missing, as we do not deal with incomplete symbols directly;
as we previously explained incomplete symbols are a kind of
syntactic sugar, and therefore all symbols XdB occurring in Ce
are represented by Xe
dBe in this construction as they have the
same meaning. In Step 4, the first two axioms (a) and (b) directly correspond to Condition 4 of Definition 9, axiom (c) is
needed to assure that the newly added constant undef will not
be identified with any individual of the original CKR. In Step 8,
the pair of axioms (a) actually serves to maintain Condition 8
of Definition 9; the second pair (b) added in this step has no
influence on the semantics of #K, but it serves to maintain
#K decidable, as further discussed below.

Thanks to the transformation we are now able to check d-satis-
fiability of a CKR knowledge base K by checking for satisfiability/
entailment in #K. This is formally established by the following
two lemmata.

Lemma 3. If K is d-satisfiable then #K is satisfiable.

Proof (Sketch). As K is d-satisfiable, there exists a model I of K
 ;. Let us construct a DL interpretation I 14 hD;	Ii over
with Dd

#C; R as follows:

1. D 14

Dd [ fxundefg where xundef is a new element not occur-
2. adI 14 aI d if aI d is defined otherwise adI 14 xundef for every

ring in Dd for all d 2 DC;
individual a and for every d 2 DC;
undefI 14 xundef;

d2DC

for every atomic concept C of R and for every

3. Ad

eI 14 CI d
d; e 2 DC;

Clearly D  ;. It remains to prove that all the axioms of #K are
satisfied by I. Depending on the type of axiom, this largely a
consequence of Definition 9 or Lemma 1. Full proof is listed in
Appendix. h

Lemma 4. If there is d such that #K 2 >d
satisfiable.

d v ?, then K is d-

Proof (Sketch). Given a CKR K let I be a model of #K such that
dI
>d
is not empty. This model exists since by hypothesis
#K 2 >d
d v ?. Let us construct the CKR model I 14 fI dgd2DC

where for every d 2 DC, I d 14 hDd;I di is defined as follows:
1. Dd 14 >d
dI ;

2. aI d 14 adI if adI  undefI otherwise aI d is undefined for every
individual a;
3. XfBI d 14 Xd

for every atomic concept/role XfB.

fBd

It remains to prove that the conditions of Definition 9 are
satisfied. This follows from the construction of #K, for the full
proof see Appendix. h

For any given CKR K; #K is a SROIQ knowledge base. As discussed in Section 2, reasoning in SROIQ is known to be decidable
only under certain restrictions. Since the RIA introduced in Step 21
of the construction #K spoil the regularity of the role hierarchy of
#K, we rely on RBox stratification. Particularly, in Step 21, in order to maintain the stratification of the RBox after the pair of axioms (a) is introduced, we add also the pair (b) that is based on the
requirements for stratified RBoxes [15]. Thus the stratification of
#K is not broken in Step 21. Since a new role Sd;e f
is used in each
iteration of this step, this has no influence on the semantics of
other symbols. This is an important step in order to avoid introduction of undecidability solely by the reduction of K into #K. As
undecidability may still be caused by complex dependencies in
the role hierarchy of K, therefore we will use stratification of
#K as a sufficient condition to distinguish cases when this is
not true. We summarize the findings of this section in the following theorem.

Theorem 2. If #K is stratified, then checking if K  d : / is
decidable with the complexity upper-bound of 2NEXPTIME.

Proof (Sketch). The decidability follows directly from Lemma 3, 4
and from the fact that #K is stratified. The complexity upperbound follows from the fact that the reduction is polynomial, more
precisely, cubic. Given a CKR K of size m it produces a SROIQ
knowledge base #K of size Om3. An important fact to establish
this result is that the number of dimensions in K is assumed to be a
fixed constant. This is justified by relevant research on properties
of context space (e.g., [11] suggests that twelve dimensions should
be enough). Also that the number of contexts n is always smaller
than the size of the knowledge base m, as when a new context is
introduced, axioms are added to M which is part of K. Full proof
is listed in Appendix. h

6. Related work

5 Please note that in our previous report [25] we mistakenly introduced a simpler
version of this step that, most notably, did not involve nominals. This simpler
construction is not correct.

The theoretical foundations of contextualized knowledge representation were laid down by McCarthy [8]. It is based on the idea to

represent logically and reason also about the meta knowledge that
constraints the validity of the knowledge represented in the first
place (object knowledge). McCarthy proposed a unique language
for both kinds of knowledge, namely quantified modal logic. This
approach allows for great representation power, but easily leads
to undecidability. Therefore in CKR we avoid mixing the meta
knowledge and the object knowledge arbitrarily; the meta knowledge semantically influences the object knowledge, but not the
other way around.

Among the most influential works in contextualized knowledge representation is undoubtedly the one of Lenat [11], who
proposed a structured knowledge base organized in units called
micro theories, which in our framework correspond to contexts.
Lenat also proposed dimensional parameters to be attached to
the micro theories, and investigated on the types of dimensions
and the structure of the dimensional space. The paper describes
the basic set of twelve dimensions that should be satisfactory
for most applications. This theoretical framework was implemented in the CYC system [26] which is a successful commercial
product. The CKR framework shares notable similarities with this
approach, in that the knowledge is organized in contexts, which
are arranged in a dimensional space. However, the propagation
of knowledge between contexts is implemented on a different
basis in CKR, there are no qualified symbols in the Lenats
approach [11].
fully compatible with
SROIQ (and therefore OWL 2), so that knowledge available via
the Semantic Web can be directly stored and retrieved in a contextualized way.

In addition, CKR is

Perceiving the need for some means of representing context in
the Semantic Web, Both aRDF [19] and Context Description
Framework [5] extend RDF triples with an n-tuple of qualification
attributes with partially ordered domains. Apart from CKR being
on top of OWL 2, it differs from these approaches by qualifying
whole theories and not each formula separately. This approach is
more compact as usually the context is shared a by group of
formulae.

Straccia et al. [20] enable RDFS graphs to be annotated with values from a lattice. The semantics of the framework is based on an
interpretation structure that is common in multi-valued logics.
This effectively restricts the dimensional structure to a complete
lattice, as for every two contexts there must be a meet (^) and a
join (_) and also global bottom (?) and top (>) must exist. Contrary to this, the CKR semantics permits any directed acyclic graph,
even an unconnected one. This is intentional, as we want to permit
certain dimensions to be modeled based on exiting ontologies. The
location dimension may for instance be based on the Geonames6
ontology. Also,
if for instance a believer dimension is added, a
separated dimensional space may be necessary as no knowledge
propagation between believers is desired. Also the top class
(rdfs : Resource) has the same semantics in all contexts, and all constants are equally defined in all contexts  in CKR this is controlled
by the context hierarchy  and no equivalent of qualified symbols
is available in this framework.

Another extension of RDFS to cope with context was proposed
by Guha et al. [3] and further developed in Bao et al. [27]. A new
predicate isinc; / is used to assert that the triple / occurs in the
context c. A set of operators to combine contexts (c1 ^ c1;
c1 _ c2; :c) and to relate contexts (c ) c2; c ! c2) is defined, making the approach particularly suited for manipulating contexts.
Unfortunately, no sound and complete axiomatization or decision
procedure was provided so far.
The contextual DL ALCALC [6] is a multi-modal extension of the
ALC DL with the contextual modal operator 12CrA representing all

6 http://www.geonames.org/.

objects of type A in all contexts of type C reachable from the
current context via relation r. In both ALCALC and CKR contextual
structure is formalized in a meta language separated from the
object language used to describe the domain. The main difference
between CKR and ALCALC is that CKR is more expressive in the
object language (SROIQ vs. ALC) but less expressive in the contextual assertions, allowing qualification of knowledge only w.r.t.
individual contexts rather than context classes as in ALCALC. The
effect of this choice is that in CKR the complexity of reasoning is
the same as in the object language (i.e., 2NEXPTIME) while in
ALCALC the complexity jumps to 2EXPTIME compared to EXPTIME for
ALC. On the other hand, this comparison is only preliminary, and
it will be more accurate to compare the two frameworks w.r.t.
the same local language. We plan to investigate an ALC-based
CKR as future work.

The Metaview approach [7] enriches OWL ontologies with logically treated annotations and it can be used to model contextual
meta data similarly to CKR albeit on per-axiom basis. The main difference is that in the Metaview approach the contextual level has no
direct implications on ontology reasoning, but it makes possible to
reason about the ontology or even data. Also a contextually sensitive
query language MQL is provided. The examples presented in this paper concentrate especially on modeling provenance of data and
associated confidence, and the framework seems well suited for this
purpose. Our research is concerned with other aspects of context,
e.g., to break down the data-set into smaller well manageable units,
knowledge reuse, etc. A context-aware query language was also designed and implemented for CKR [21]. It would be interesting to further compare the frameworks. And also, from the point of view of
CKR, to cope with the goals suggested by the Metaview approach,
for instance we can try modeling different confidence-levels of data
by means of a new dimension.

Related to our approach is also the data tailoring technique that
was described by Tanca [28]. Here, the contextual structure is captured by a context dimension tree, which is in fact a refinement
of dimensional vectors into a tree form. Top level dimensions are
thus specialized into sub-dimensions, and only leaf configurations
represent possible contexts associated with different views of the
data. This serves to provide the user with an appropriate view, based
on her context. Multiple dimensions relevant for this application are
suggested, such as time, topic of interest, but also interface (e.g. human or machine). The dimension tree is combined with a set of constraints to limit the valid combinations which serves to filter out
some of the irrelevant configurations. The notable parallel of this approach to ours is that a structured dimensional space is used to break
down the data set into relevant portions.

On the semantic level, CKR is also related to approaches such as
multi-context systems [16], distributed description logics [17],
E-connections [29], but especially approaches concerned with
semantic importing such as package-based description logics
(P-DL) [18] and semantic imports [30]. In P-DL imports of symbols
are implemented by relating the elements of interpretation domains with one-to-one mappings. The work of Pan et al. [30] goes
even closer to our approach by assuming that the interpretation
domains of distinct ontologies may overlap. In both cases additional semantic constraints are introduced to support various
desired properties of the importing paradigm.

In our current work, we use similar techniques, however we use
them to meet different goals. Borrowing the viewpoint of the
semantic imports paradigm, we may observe that imports are
implemented between the contexts of CKR, however, to various extents depending on the relation of the two contexts in question. If
the contexts are directly related by the coverage, all information
from the narrower context is accessible in the broader context
using a technique similar to importing. On the other hand, the narrower of the two contexts may only access part of the other con-

L. Serafini, M. Homola / Web Semantics: Science, Services and Agents on the World Wide Web 1213 (2012) 6487

texts information. If two contexts are related indirectly, then the
importing is even more limited. Thus we can see that similar techniques are being used in order to characterize a complex scenario
of information reuse in accordance with the underlaying ideas of
the AI theories of context which is carefully crafted in the semantic
conditions asserted in CKR models.

In addition we would like to mention also the work done on
ontology versioning and semantic difference in description logics
[31,32]. While there are certain obvious similarities between
ontology versioning and contextual representation, most notably
in both cases there are multiple knowledge bases that one has
to handle and reason with, the motivation and also the problems
one faces in these two approaches are different. In ontology versioning we face the problem of knowledge evolution, there are
multiple versions of the ontology and we are interested in
characterization of the changes (the notion of semantic differ-
ence), which would allow to store and reason with the different
versions efficiently. That is, at any time one wants to draw conclusions from a particular revision of interest. In contextual representation on the other hand, we are dealing with knowledge
chunks which are not evolving versions of one another, but rather
one is complementary to each other. When we draw conclusions
from one of them, they are possibly influenced by the other
chunks, but not in the sense of outdated/updated information.
Although implemented differently in each of the approaches,
the most interesting similarity is probably the need to break
down the information into multiple units and to be able to combine it efficiently when it is relevant.

7. Conclusion

With increasing numbers of ontologies and data-sets being published on the Web under the initiatives such as Semantic Web and
Linked Open Data, the need of having a way to consider, process,
and take advantage also of the context associated with knowledge
becomes more and more apparent. Multiple approaches to deal with
context have been proposed; we have reviewed a number of them in
the previous section. It is not yet the case that a commonly acknowledged representation framework and methodology to deal with
context on the Semantic Web has been found.

Building on the foundations of contextual knowledge representation [8,16,10,11] we have proposed Contextualized Knowledge
Repository (CKR)  a context-aware representation framework
specifically tailored for the Semantic Web. CKR offers several distinctive features. The knowledge base is structured into units
called contexts with contextual attributes explicitly assigned; this
allows to group axioms and data that are assumed to hold under
similar circumstances, and improves topical organization and
maintenance of the knowledge base. Such approach is also well
in line with the context as a box paradigm which opens the possibility to exploit the existing body of research on contextual representation [9,10] in applications of the framework.

Contextual attributes have structured value-sets which results
into a hierarchical organization of contexts in a dimensional space.
This makes the relations between contexts explicit and allows to maintain contexts with different levels of generality. Part of the knowledge
expressed in a context has local validity, but part may as well influence
related contexts. CKR allows knowledge to be lifted between contexts
with so called qualified concepts and roles. This provides a significant
level of control to the knowledge engineer who may exactly specify
which symbols have only local meaning and which are reused between
contexts. The complexity of the lifting mechanism is hidden from the
user as it is automatically implemented by the semantics; there is
no need to express lifting axioms directly.

The knowledge inside each context is fully expressed using the
standard Semantic Web languages. The CKR framework in this
paper uses the SROIQ DL which corresponds to OWL 2, but an
RDFS-based version has been developed as well [22]. The meta
knowledge is gathered in a separate knowledge base which is
expressed in the same language as well. Therefore adopting the
framework by a user familiar with the standard Semantic Web
languages should not be difficult.

In this paper we have described syntax and semantics of CKR
built on top of the SROIQ DL. We have provided a sound and
complete ND calculus that characterizes logical consequence in
CKR, particularly focusing on cross-context entailment (i.e., the
transfer of knowledge between contexts). We have also studied
basic properties of cross-context entailment in CKR. Finally, we
have showed that reasoning with CKR is decidable with computational complexity same as for SROIQ (i.e., within the class
2NEXPTIME).

In the future, we plan to investigate the formal properties of
CKR based on more tractable fragments of OWL 2, e.g., OWL-Horst
[33]. We have already developed a prototype on top of the Sesame
2 triple store which uses RDFS as local language [22]. In the proto-
type, contexts have been naturally implemented with named
graphs [34]. We also plan to study tableaux based reasoning techniques for CKR which would allow to develop a reasoner for the
DL-based CKR, and also to investigate on additional meta level constructs (such as for instance context classes) and novel applications
of meta level reasoning.

to this

context.

For

the

relevant

instance

In order to evaluate the practical applicability of CKR we are currently undergoing an experimental study in which we model and populate a CKR knowledge base of non trivial size. We have chosen the
domain of football tournaments and more specifically the different editions of FIFA WC. This domain was broken down into a number of con-
texts, some of them more general such as the generic contexts sports
and football, some more specific such as the particular editions of FIFA
WC (e.g., CFIFA WC;2010;South Africa), but also as specific as the stages of
each tournament, and further down to single matches (e.g.,
CFIFA WC Match 42;2010;South Africa). In every context we put axioms that
are
axioms
GoalKeeper v Player; Midfielder v Player and Player v Sportsmansports
belong to the generic context of football as they serve to model
various player positions in the game and the fact that all football
players are
axioms
TeamA v :TeamB and TeamA t TeamB v TeamFIFA WC belong to the
context of a particular match of the FIFA WC, and serve to assure that
there are two teams involved in this match, that these two teams are
distinct and are both part of the respective edition of FIFA WC.
The knowledge base was populated with data available from Free-
base, DBPedia, and other sources on the Web, and then stored in
our prototype implementation of CKR. In this study, we aim to evaluate the representational aspects, that is, how easy is to model with
the CKR framework, whether the resulting modeling is efficient and
practical, etc., but also on the computational aspects such as the efficiency of query answering. We plan to publish our results in near
future.

sportsmen. On the other hand the

Acknowledgements

The authors would like to thank to Andrei Tamilin, Mathew
Joseph, Loris Bozzato and Francesco Corcoglioniti who provided
valuable discussion and feedback for this research. Support from
the Live Memories project is gratefully acknowledged. Martin
Homola is also supported from Slovak national Projects VEGA no.
1/0688/10 and 1/1333/12.

if X 14 9R:C and R 2 Re; then f 9R:CI0

Appendix A. Proofs

A.1. Proof of Lemma 1

, for every role R; RI 14 f RI0

Lemma 1. If I and I0 comply with f : R ! R0, then, for every concept C; CI 14 f CI0
, and for every
axiom /; I  / iff I0  f /.
Let us have two DL-alphabets R and R0, a DL-embedding
f : R ! R0 and two respective DL-interpretations I and I0 complying with f. From Definition 15 this implies the following four facts
which we denote by (y):

, for all individuals a of R such that aI is defined;
, for all symbols X 2 Rc;

1. aI 14 faI0
2. XI 14 fXI0
3. AI 14 fAI0 \ f>I0
4. RI 14 fRI0 \ f>I0 
 f>I0

, for all concepts A 2 Re;

, for all roles R 2 Re.

Let us first realize how the domain DI of I is embedded into the
domain DI0 of R0. Later in the proof we will denote this observation
by (z):

DI 14 >I 14 f>I0

# DI0

The second equation is due to > 2 Rc and from the fact that I and I0
comply with the embedding f. The other two equations trivially follow from I and I0 being DL-interpretations.

We will now prove that for every concept or role X it holds that

XI 14 f XI0

. The proof is by structural induction on X:

if X 14 A2 Rc; then f AI0 14 fAI0

by definition of f  14 AI from y;2

if X 14 A 2 Re; then f AI0 14 fA u f>I0

by the definition of f 
by the interpretation of u 14 AI from y; 3

14 fAI0 \ f>I0

if X 14 :C; then f :CI0 14 f> u :f CI0

by definition of f 

by interpretation of u

14 f>I0 \ :f CI0
14 f>I0 \ DI0 n f CI0 by interpretation of :
14 f>I0 n f CI0
14 DI n f CI0
14 :CI by interpretation of :

from z 14 DI n CI by induction

due to f>I0

# DI0

if X 14 C u D; then f C u DI0 14 f C u f DI0
by interpretation of u

14 f CI0 \ f DI0
14 CI \ DI by induction 14 C u DI by interpretation of u

by definition of f 

if X 149R:C and R2 Rc; then f 9R:CI0

by definition of f  and R2 Rc

149fR:f CI0
14fx2 DI0j9y x;y2 fRI0 ^ y2 f CI0g by interpretation of 9
14fx2 DI0j9y x;y2 fRI0 ^ y2 CIg by induction
14fx2 DI0j9y x;y2 RI ^ y2 CIg from y;2
14fx2 DIj9y x;y2 RI ^ y2 CIg by RI
149R:CI by definition of 9

#DI 
 DI and DI #DI0

from z 14 DI \ fx 2 DI0j9y x; y

by definition of f  and R 2 Re
by interpretation of u

14 f> u 9fR:f CI0
14 f>I0 \ 9fR:f CI0
14 DI \ 9fR:f CI0
2 fRI0 ^ y 2 f CI0g by interpretation of 9
14 DI \ fx 2 DI0j9y x; y 2 fRI0 ^ y 2 CIg by induction
14 fx 2 DIj9y x; y 2 fRI0 \ DI 
 DI ^ y 2 CIg since CI # DI
14 fx 2 DIj9y x; y 2 fRI0 \ f>I0 
 f>I0 ^ y 2 CIg from z
14 fx 2 DIj9y x; y 2 RI ^ y 2 CIg from y; 4
14 9R:CI by interpretation of 9

if X 14 9R: Self and R 2 Rc; then f 9R:SelfI0

by definition of f  and R 2 Rc

14 9fR: SelfI0
14 fx 2 DI0jx; x 2 fRI0g by interpretation of 9R:Self
14 fx 2 DI0jx; x 2 RIg by y; 2
14 fx 2 DIjx; x 2 RIg due to RI
14 9R:SelfI by definition of 9R:Self

# DI 
 DI and DI # DI0

if X 14 9R:Self and R 2 Re; then f 9R:SelfI0

by the definition of f  with R 2 Re

14 f> u 9fR:SelfI0
14 f>I0 \ fx 2 DI0jx; x 2 fRI0g by interpretation of u and 9R:Self
14 DI \ fx 2 DI0jx; x 2 fRI0g from z
14 fx 2 DIjx; x 2 fRI0g as DI # DI0 by z
14 fx 2 DIjx; x 2 fRI0 \ DI 
 DIg
14 fx 2 DIjx; x 2 fRI0 \ f>I0 
 f>I0g from z
14 fx 2 DIjx; x 2 RIg from y; 4
14 9R:SelfI by definition of 9R:Self

if X 14PnR:C and R 2 Rc; then f PnR:CI0

by definition of f  and R 2 Rc

14PnfR:f CI0
14 fx 2 DI0j916i6n yi x; yi 2 fRI0 ^ yi 2 f CI0g interpretation of Pn
14 fx 2 DI0j916i6n yi x; yi 2 fRI0 ^ yi 2 CIg by induction
14 fx 2 DI0j916i6n yi x; yi 2 RI ^ yi 2 CIg by y; 2
14 fx 2 DIj916i6n yi x; yi 2 RI ^ yi 2 CIg as RI
14PnR:CI by interpretation of Pn;

# DI 
 DI ; DI # DI0

if X 14PnR:C and R 2 Re; then f PnR:CI0

by definition of f  and R 2 Re

14 f>u PnfR:f CI0
14 f>I0 \ fx 2 DI0j 916i6n yi x; yi 2 fRI0 ^ yi 2 f CI0g by u; Pn
14 DI \ fx 2 DI0j 916i6n yi x; yi 2 fRI0 ^ yi 2 f CI0g by z
14 fx 2 DIj 916i6n yi x; yi 2 fRI0 ^ yi 2 f CI0g as DI # DI0 by z
14 fx 2 DI0j 916i6n yi x; yi 2 fRI0 ^ yi 2 CIg by induction
14 fx 2 DIj 916i6n yi x; yi 2 fRI0 \ DI 
 DI ^ yi 2 CIg as CI
14 fx 2 DIj 916i6n yi x; yi 2 fRI0 \ f>I0 
 f>I0 ^ yi 2 CIg by z
14 fx 2 DIj916i6n yi x; yi 2 RI ^ yi 2 CIg by y; 4
14PnR:CI by definition of Pn

# DI

L. Serafini, M. Homola / Web Semantics: Science, Services and Agents on the World Wide Web 1213 (2012) 6487

if X 14 fag; then f fagI0 14 ffagI0

by definition of f 

14 ffaI0g by interpretation of nominals 14 faIg fromy; 1
14 fagI by interpretation of nominals

if X 14 R 2 Rc; then f RI0 14 fRI0

by definition of f  14 RI byy; 2

if X 14 R 2 Re; then f RI0 14 fI  fR  fII0

by definition off 

14 fu; vj9 x; y 2 fRI0 ^ u; x;v; y
2 fII0g by interpretation of  14 fx; yjx; y
2 fRI0 ^ x; x;y; y 2 fII0g as II0
14 fx; yjx; y 2 fRI0 \ f>I0 
 f>I0g
as II0
14 fx; yjx; y 2 fRIg from y; 4 14 fRI

is identity on f>I0

is identity on f>I0

by definition of f 

if X 14 R  S; then f R  SI0 14 f R  f SI0
by interpretation of 

14 f RI0  f SI0
14 RI  SI by induction 14 R  SI by interpretation of  :
Let us now continue with the second proposition of the lemma,
i.e., that for every axiom /; I  / if and only if I0  f /. We must
consider all the cases corresponding to the different forms of /:

1. / 14 Ca; f / 14 f Cfa: from (y,1) we have aI 14 faI0

we have proved above that CI 14 f CI0
aI 2 CI iff faI0 2 f CI0

iff I0  f Cfa;

and
. Therefore I  Ca iff

2. / 14 Ra; b; f / 14 fRfa; fb:

from (y,1) we

aI 14 faI0
rest of the proof is analogous to the previous case;

and from (y,4) we have RI 14 fRI0

; bI 14 fbI0

have
. The

3. / 14 :Ra; b; f / 14 :fRfa; fb:

aI 14 faI0

, we have I  :Ra; b iff aI ; bI R RI
iff I0  :fRfa; fb;

since

bI 14 fbI0
iff faI0

and RI 14 fRI0

; fbI0 R fRI0

have

proved

that
. The

4. / 14 C v D; f / 14 f C v f D: as we have already proved
# BI

. Therefore I  C v D iff CI

and DI 14 f DI0

CI 14 f CI0
iff f CI0

# f DI0

iff I0  f C v f D;

5. / 14 R v S; f / 14 f R v fS: we

S 2 Re

. If S 2 Rc, we have from (y,2) that SI 14 fSI0
then from (y,4)

RI 14 f RI0
proof of this case is analogous to the previous case.
from (z) we have
If
SI 14 fSI0 \ DI 
 DI . For this case, let us first prove the if part:
suppose I0  f R v fS and therefore f RI0
. Then
RI 14 RI \ DI 
 DI 14 f RI0 \ DI 
 DI # fSI0 \ DI 
 DI 14 SI .
Which amounts to I  R v S. The only-if part: Suppose
I  R v S, that is, RI
# SI 14
fSI0 \ DI 
 DI # fSI0

# SI . It follows that f RI0 14 RI

# fSI0

and

6. / is a 14 b, i.e., f / is fa 14 fb: we know from (y,1) that
iff

. Hence I  a 14 b iff aI 14 bI

and bI 14 fbI0

aI 14 faI0
faI0 14 fbI0

iff I0  fa 14 fb;

7. / is a  b, i.e., f / is fa  fb: as a consequence of the previous case we have I  a  b iff I 2 a 14 b iff I0 2 fa 14 fb iff
I0  fa  fb.

A.2. Proof of Theorem 1

Theorem 1 (Soundness and Completeness). For every CKR K
over hC; Ri, for every d 2 DC, and for every formula / over R,
K  d : / if and only if K  d : /.

A.2.1. Soundness

We ought to prove that if K  d : / then also K  d : /. We will
prove this by showing that all calculus rules are sound. For each
rule q, which in general is of the form:

a1

. . . an

12Bn1
an1

12Bnm
anm

q;

. . .

we have to prove that if K; Bi  ai holds for each i, n < i  n  m,
then it is also true that K;fa1; . . . ; anmg  a. More formally, we
have to prove the implication:
K; Bn1  an1 ^ 			 ^ K; Bnm  anm ) K;fa1; . . . ; anmg  a:
This has to be proved separately for each of the calculus rules, as
listed in Table 3. Due to the rules with discharges, the proof is done
by structural induction. The base of the induction is formed by the
cases of the rules without discharges. The inductive step comprises
the remaining cases, in which the induction hypothesis allows us to
derive K; Bi  ai from K; Bi  ai, for each premise ai with discharges Bi of the rule q in question, because the proof respective
to this subproof is a sub-tree of the overall proof of the conclusion
of q. The proof for each type of rule follows:
LReas: let I be a model of K [ fd : /1; . . . ; d : /ng. This implies that
it also satisfies I d DL /i, for every i; 1 6 i 6 n. From the
assumptions of the LReas rule, f/1; . . . c; /ng DL / (i.e.,
the conclusion is only derived by this rule when this
entailment universally holds). From monotonicity of DL
this implies I d DL / and hence also I  d : /;
Top: this rule has three independent forms. The first form
assumes d  e on the meta knowledge and concludes
f : Ad v >e. Let Cd and Ce be two contexts of K such that
d  e and let I be any model of K. By Condition 2 of Definition 9 we have AI f
d . By Condition 1 of the same definition >I f
e . Together this implies I f DL Ad v >e and
hence I  f : Ad v >e.
The second form of the Top rule concludes f : 9Rd:> v >d
without any premises. We therefore have to show that
I  f : 9Rd:> v >d, i.e., that the domain of the binary relation RI f
d , in every model I of every CKR K. This
is a direct consequence of Condition 3 of Definition 9. The
case of the third form of the Top rule is exactly analogous
except it involves the range of RI f
d ;

d is under >I f

Bot: there is no model of a CKR K in which d : ? a the premise
of the Bot rule is true. This is due to the fact that ? a is
not satisfied in any DL-interpretation, not even in the special one with empty domain. Therefore, trivially, it is true
that the conclusion e : > v ? is satisfied by all models of
K;

d #>I f

d #>I f

d . This implies ai 2 >I d

Push: let I be any model of K [ fe : /@d; e : >da1; . . . c;
e : >dang where a1; . . . c; an are all constants occurring
in /. This implies that I e DL >dai, for every i, 1 6 i 6 n,
and therefore ai 2 >I e
d and hence
ai 2 Dd (if d  e it follows from Definition 9, if d 14 e it is
trivial). This assures that / is defined in I d, as all constants
occurring in it are defined. Since d  e, from Lemma 2 we
know that I d and I e comply with the embedding respective to @d, and since I e DL /@d, it follows from Lemma
1 that I d DL /. Hence I : d : /;
Pop: let I be a model of K [ fd : /g. This implies I  d : /, i.e.,
I d DL /. From d  e and from Lemmata 1, 2 this implies
I e DL /@d and hence I  e : /@d;
aE: the rule assumes that K; d : >a  d : > v ?, for any a
that does not appear in K, and under this assumption we
have to prove that K  d : > v ?. Let us assume the con-
trary, i.e., K 2 d : > v ?. In this case, there must be a
model I of K in which >I d U?I d . Then there is x 2 >I d
(such that x R ?I d ). Since a does not appear in K, if we con-
0 by extending I with the assignment aI f 14 x for all
struct I
f 2 DC such that x 2 Df (i.e., certainly for f 14 d), then

the

0  K as it satisfies all axioms thereof.

0  d : >a as aI d 14 x 2 >I d 14 >I0

of
and from the
K; d : >a  d : > v ? and since I
must be the case that >I d 14 >I0
contradiction;

In addition
d . From the assumption
induction hypothesis
0  K [ fd : >ag,
it
d 14 ?I d which is a

d # ?I0

rule,

tE: the

K; d : Cx  e : /

this

rule

that

assumes

and
K; d : Dx  e : /. By structural
induction we have
K; d : Cx  e : / and K; d : Dx  e : / (from the induction hypothesis). Under these assumptions we need to
prove K; d : C t Dx  e : /. Let I be any model of
K [ fd : C t Dxg. In this model, I d DL C t Dx. By basic
properties of DL-interpretations it must either hold
I d DL Cx or I d DL Dx. Let us assume the first case.
Since in this case I is a model of K [ fd : Cxg, from the
fact that K; d : Cx  e : / we get I  e : /. The in the
other case analogously I  e : / due to K; d : Dx  e : /;
9E: the rule assumes K; fd : Rx; y; d : Cyg  e : /. By induction hypothesis we have K; fd : Rx; y; d : Cyg  e : /.
prove
Under
K; d : 9R:Cx  e : /.
of
K [ fd : 9R:Cxg. This implies that there must be an element x0 2 Dd such that xI d 14 x0 and x0 2 9R:CI d. From the
properties of DL-interpretations,
there must also by
y0 2 Dd such that hx0; y0i 2 RI d and y0 2 CI d. Since the individual y does not appear anywhere in K; yI d is undefined.
0 by extending I with the assignment
Let us construct I
yI f 14 y0 for all f 2 DC such that y0 2 Df. Since all axioms
of K and also all conditions of Definition 9 are satisfied
0,
by I
and
K  d : Cy,
0  K [ fd : Rx; y; d : Cyg.
0  e : /. Since
From the assumptions we now know that I
the individual y does not occur in /, this implies that
I  e : / as well, because the only difference between I
and I

and in addition also K  d : Rx; y,

0 is the interpretation of y;

assumption we

then in fact I

any model

ought

Let

by

to

P nE: the case of this rule is analogous to the previous case. From
the fact that I  K [ fd :P nR:Cxg we are able to find n
n 2 Dd with the required propdistinct elements y0
erties. We then extend the model I by assigning these elements to the individuals y1; . . . c; yn respectively, and
prove that the extended model entails e : / using the
induction hypothesis. As all the constants in question are
new, this also implies I  e : /.

1; . . . c; y0

A.2.2. Completeness

We now prove the completeness of the axiomatization, i.e., that
K  d : / implies K  d : /. Relying on the fact, that for any DL-for-
mula / over R the problem of entailment is reducible to (un)satis-
fiability, it suffices to prove the statement:
If K is unsatisfiable then K  d : > v ? :

This is justified as follows. If K  d : / then there exists a CKR K0
(constructed by the respective reduction). The statement above
shows that in this case we are able to prove by the calculus that
K0 is d-inconsistent. Since this holds for any formula /, the calculus
is complete. We give an indirect proof by proving the contrapositive of the statement:
If K 0 d : > v ? then K is d-satisfiable:

The proof is a variation of the Henkin construction of a model
based on constants (see e.g. [24]). We will show that a model of
K can be constructed by gradually enriching K with additional
assertions that are compatible with it. Once this is exhaustingly
done, the model can be constructed from the enriched version of

K. Since a CKR need not to have a finite model (because SROIQ
knowledge bases need not to have finite models) we will also enrich the object alphabet R with an infinite set of constants N so that
all elements in the interpretation domain of the model that is being
constructed are covered by constants. Thus the model will be encoded inside the enriched version of K.

Since in each CKR model, a local model I f is totally encoded inside each I e such that f  e, to construct any model, we need to
pay special attention the so called roof contexts of K, i.e., those
which have no super-context. We will denote this set of contexts
by E. Finally, in the following definition we construct the CKR KE
by enriching K as discussed above. Later on we will show how
model of K is encoded within it.

let E 14 fe 2 DCj
e2E Ne, where for each e 2 E; Ne 14
i ji P 0g is a countably infinite set of new constants not

Definition 22 (KE). Given a CKR over hC; Ri,
8f 2 DC e  fg. Let N 14
fxe
appearing in R. Let us inductively construct KE as follows:
; 14 K [ fd : >xd

given F  E and e 2 E such that e R F,
KF[feg 14 KF, otherwise KF[feg in constructed in two steps:

if KF  e : > v ? then

0g;

step 1: we add witnesses for all existential statements. Let
/1; /2; . . . c be an exhaustive enumeration of all assertions
of the form 9R:Ca or P nR:Ca in the vocabulary R
extended with Ne. Note that R is possibly an inverse role
and C is any complex concept. We inductively construct
KF;m for m P 0 as follows:
KF;0 14 KF ;

8>>>>><
>>>>>:

if /m1 is of the form 9R:Ca;

u C

KF;m [ e : :9R:C t 9R:

xe

KF;m [ e : : P nR:Ct P nR:

xe
k; . . . ; xe
if /m1 is of the form P nR:Ca;

kn1

u C

KF;m1 14

where xe
KF;m. The result of this step is KF; 14

k; . . . ; xe

kn1 are constants of Ne not appearing in

mP0KF;m;

step 2: we saturate KF[feg with respect to all atomic assertions on
the constants of R extended with with Ne. Let /1; /2; . . . c
be a complete enumeration of assertions of the form
Aa; Ra; b, or a 14 b, where A and R are are atomic concepts and roles of R, and a and b are constants of R or Ne
such that KF;  e : >a and KF;  e : >b. We inductively
construct KF;
0 14 KF;
KF;

m [ fe : /g
m1 14 KF;
KF;
m [ fe : :/m1g otherwise
KF;

m [ fe : /m1g is e-consistent

m for m P 0, as follows:

where by :a 14 b we mean the non-equality assertion a  b
for any a and b. The result of this step is KF[feg 14
mP0 KF;
m .

if KF;

Thus at the end of the construction given in the previous definition we reach the knowledge base KE. The following two lemmata
show that KE is d-consistent. This is an important step in order to
guarantee that the model of K encoded in KE is valid. The first lemma shows that adding existential witnesses in the construction has
no influence at the  consequence at all. The second lemma then
proves that starting from d-consistent knowledge base K, we end

L. Serafini, M. Homola / Web Semantics: Science, Services and Agents on the World Wide Web 1213 (2012) 6487

up with a d-consistent knowledge base KE.

Lemma 5. For every assertion / in R that does not contain any
i , for every F # E, and for every f 2 DC : KF  f : / iff
occurrence of xe
KF;  f : /.

Proof. The only if direction trivially follows due to monotonicity
of the language. As KF # KF;, everything that is proved from KF is
also proved from its superset KF;.

The if direction. Suppose KF;  f : /. We first show, that there
is a finite subset of S of KF; such that S  f : /. This is due to the
length of the proof of f : / from KF; is finite and in each step we
use exactly one inference rule which derives its conclusion from a
finite number of premises. Let us denote the set of all premises
used by all the inference rules in the proof by P. Obviously the set P
is finite and P  f : /. The formulae in P are either from KF; or were
derived as the proof goes on. Let S 14 f/ 2 Pj/ 2 KF;g. Since all the
formulae which we discarded are consecutively derived as the
proof goes on, then also S  f : /, and by construction S # KF;.

Since for every finite subset of KF; there is a KF;m that contains
such a subset, we have that KF;m  f : /, for some m; let us denote
this deduction by P. If m 14 0 then KF;m 14 KF and we are done. If
m > 0 we will show that in this case also KF;m1  f : /. We
distinguish two cases:

case 1: KF;m 14 KF;m1 [ fe : :9R:C t 9R: xe

u Cag. Then starting from P we construct a deduction of f : / from KF;m1:

(1)
(2)
(3)

(4)
(5)
(6)
(7)
(8)

(9)
(10)

e : :9R:C t 9R:Ca
e : :9R:Ca
e : :9R:C t 9R:
fxe
kg u Ca

f : /

e : 9R:Ca
e : R a; xe

e : C xe

e : :9R:C t 9R:
fxe
kg u Ca
f : /
f : /

(11)

f : /

KF;m1

LReas

(2) assumption
(2)

from (2) by LReas

(2),KF;m1

from (3) by P

(5) assumption
(6) assumption
(7) assumption

(6),(7)

from (6,7) by LReas

(6),(7),KF;m1
(5),KF;m1

KF;m1

from (8) by P
from (5,9) by $E
disc. (6) and (7)
from (1,4,10) by tE
disc. (2) and (5)

case 2: KF;m 14 KF;m1 [ fe : : P nR:C t P nR:fxe

kn1gu C
ag. As before, starting from P, we construct a deduction of f : / from KF;m1:

k; ... ; xe

 xe

8ij e : xe

e : : P nR:Ct P nR:

uC

xe
k; . . . ; xe

kn1

(9)

0 6 i < n
8ij assumption

0 6 i < n; i  j

(10)

f : /

(11)

f : /

(12)

f : /

6i;7i;
8i06i  j<n
6i;7i;
8i06i  j<n; KF;m1

from (6,7) by
LReas
from (9) by P

(5),KF;m1 from (5,10) by
PnE
disc. 6i; 7i; 8ij
KF;m1 from (1,4,11)
by tE
disc. (2) and (5)

In both cases KF;m1  f : /. Since this holds for any m > 0 it fol-

lows by induction that KF  f : /. h

Lemma 6. For every F # E; KF is d-consistent.

Proof. The proof is by induction on F. In the base case, F 14 ;.

From the construction K; 14 K [ d : >xd
, where xd
0 does not
i.e., K; d : > xd
 > v ?.
appear in K. Suppose the contrary,

As xd
0 does not appear in K, by application of the aE rule
we have K  > v ? which is a contradicts the assumption
that K is d-consistent. Therefore it must be case that K; is d-
consistent.

In the induction step, F # E is nonempty. Hence there is some
e 2 F. Let us denote by G 14 F n feg. From the induction hypothesis
KG is d-consistent. We first prove by induction on m that KG;
m is d-
consistent. For m 14 0; KG;
0 14 KG; which d-consistent, as follows
from Lemma 5: KG 0 > v ?, and KG  / iff KG;  /, therefore
KG; 0 > v ?.
Now suppose that KG;
m is d-consistent, and let us show that
KG;
m1 is d-consistent. Suppose by contradiction that KG;
m1 is not d-
m [ fe : /g and
consistent. By definition this means that both KG;
m [ fe : :/g are not d-consistent. Let P1 and P2 be two
KG;
deductions of d : > v ? from KG;
m [ fe : :/g
respectively. We will show that there exists also deduction of
d : > v ? from KG;

m [ fe : /g and KG;

m . We distinguish three cases:

case 1: if / is Aa

(1) e : >(a)

KG;

by construction, for every constant x
occurring in / we have
m  e : >x
KG;
from (1) by LReas

(1)
(2)
(3)

e : : P nR:CtP nR:Ca

e : : P nR:Ca

e : : P nR:Ct P nR:

uC

xe
k; . . . ; xe

kn1

f : /
e : P n R.C(a)

ki

(4)
(5)

6i e : Ra; xe
7i e : C xe
ki

KF;m1 LReas

(2) assumption
(2) from (2) by LReas

(2), KF;m1 from (3) by P

(5) assumption
6i assumption
0 6 i < n
7i assumption

(2) e : At:A(a)
(3) e : A(a)
(4) d : > v ?

(5) e : :A(a)
(6) d : > v ?

(7) d : > v ?

case 2: if / is Ra; b

From (3) by P1

KG;

(3) assumption
(3),
KG;

(5) assumption
(5),
KG;
KG;

From (5) by P2

From (2), (4), and (6) by tE, disc. (3)
and (5)

(1)

e : >(a)

KG;

(2)
(3)

e : >b
e : 9R:fbg
t:9R:fbga
e : 9R:fbga
(4)
e : Ra; b
(5)
d : > v ?
(6)
e : :9R:fbga
(7)
e : :Ra; b
(8)
d : > v ?
(9)
(10) d : > v ?

by construction, for evey
constant x occurring in
/; KG;
as for (1)
from (1) and (2) by LReas

m  e : >x

KG;
KG;

(4) assumption
(4)
(4), KG;

from (4) by LReas
From (5) by P1

(7) assumption
(7)
(7), KG;
KG;

from (7) by LReas
From (7) by P2
From (3), (6), and (9)
by tE, disc. (4) and (7)

case 3: if / is a 14 b

(1)

e : >(a)

KG;

e : >(b)
KG;
e : fbg t :fbga KG;
e : {b}(a)
e : a 14 b
d : > v ?

(2)
(3)
(4)
(5)
(6)

(7)
(8)
(9)

e : :{b}(a)
e : :a14b
d : > v \

(10) d : > v \

by construction, for all constants
x occurring in / we have
m  e : >x
KG;
as for (1)
from (1) and (2) by LReas

from (4) by LReas
From (5) by P1

(4) assumption
(4)
(4),
KG;

(7) assumption
(7)
(7),
KG;
KG;

from (7) by LReas
From (7) by P2

From (3), (6), (9) by tE, disc. (4)
and (7)

Proof. The proof is by structural induction C and R:

1. C 14 A is atomic: then the lemma follows directly from the

construction of KE;

2. C 14 :D: by induction either KE  e : Da or KE  e : :Da,
which implies either KE  e : ::Da or KE  e : :Da by
LReas, that is, either KE  e : :Ca or KE  e : Ca;

3. C 14 F u G: suppose KE 0 e : F u Ga. Then KE 0 e : Fa or
KE 0 e : Ga due to LReas. By induction hypothesis
KE  e : :Fa or KE  e : :Ga. Finally KE  e : :F u Ga
by LReas;
4. C 14 F t G:

that
KE 0 e : Fa and KE 0 e : Ga by LReas. By induction hypothesis we have KE  e : :Fa and KE  e : :Ga which implies
KE  e : :F t Ga by LReas;

suppose KE 0 e : F t Ga. This

implies

from the

construction of KE we have

5. C 14 9R:D:

KE  e : :9R:D t 9R:fxeg u Da for some xe.
From the construction of KE we know that either KE  e : /
or KE  e : :/ for any assertion /. Since Ra; xe and Dxe
are assertions, one of the three cases must occur:
 KE  e : Ra; xe

and KE  e : Dxe:

case

this

in

KE  e : 9R:Da directly by LReas;

 KE  e : :Ra; xe: in this case KE  :9R:fxeg u Da and
then

since we have KE  e : :9R:D t 9R:fxeg u Da
KE  e : :9R:D, both steps by LReas;

 KE  e : :Dxe: in this case again KE  :9R:fxeg u Da

and hence KE  e : :9R:D by LReas;
6. C 14P nR:D: analogously to the previous case;
7. C 14 8R:D: can be rewritten as :9R::D;
8. C 146 nR:D: can be rewritten as : P n  1R:D;
9. C 14 9R:Self: by construction we have that KE  e : Ra; a or
that

that KE  e : :Ra; a.
KE  e : 9R:Selfa or KE  e : :9R:Selfa;

10. C 14 fxg is a nominal: by construction we have KE  e : a 14 x
or KE  e : :a 14 x. By LReas this gives us KE  e : fxga or
KE  e : :fxga;

11. R 14 S is an inverse role: by induction we have either
KE  e : Sb; a or KE  e : :Sb; a, by LReas we get either
KE  e : Ra; b or KE  e : :Ra; b. h

implies

LReas

this

By

that

conclude

therefore

We
then
m  d : > v ?, which is a contradiction because by the induction
KG;
hypothesis KG;
m is d-
consistent for all m P 0. From the construction KG;
m1, and
therefore KF 14

m is d-consistent. We have now showed that KG;
m # KG;
mP0 KG;

m is d-consistent too. h

if KG;

m1  d : > v ?,

We have showed that KE is d-consistent. As the next step, in
order to prove that a model of K is encoded within it, we will
show that for any ABox assertion / of the form Ca or Ra; b
we are able to verify by the CKR calculus if / holds or if :/
holds. Recall that we have assured this by construction of KE
for all atomic assertions. For non-atomic assertions
is
shown in the following lemma. Combined with the fact that KE
contains a constant for every domain element of the model,
we will subsequently be able to retrieve and construct the
model.

it

Lemma 7. Given a CKR K over hC; Ri, and KE constructed as in
Definition 22. Let C and R be a possibly complex concept and a possibly
inverse role over R, and let a; b any individuals of R such that
KE  e : >a and KE  e : >b. Then for any e 2 DC:

1. if KE  e : >x for all individuals x in C, then either KE  e : Ca or

KE  e : :Ca;

2. either KE  e : Ra; b or KE  e : :Ra; b.

The next step of the proof is the construction of a CKR interpretation from KE in that will then be shown to be a model of K. The
basic idea is to take the constants that appear in KE as the interpretation domain. Relying on the previous lemma, we would then construct the interpretation of of each concept C in Ce by querying the
calculus whether e : Ca holds or not for each constant a, and analogously for roles. A minor problem with this approach is that in a
CKR interpretation, if two constants are equal, they are interpreted
by the same element of the interpretation domain.

Therefore we have to modify the nave construction as outlined
above, and add just one domain element for all constants that are
equal. We will achieve this by introducing an equivalence relation
on constants and use the equivalence classes as domain elements.

Definition 23 (e). Let K be a CKR over hC; Ri and let E; N, and KE
be as constructed in Definition 22. For each e 2 DC, the binary
relation e on the set of constants of R extended with N is defined
as follows:

aeb iff KE  e : a 14 b:
The equivalence class of e respective to a constant x will be denoted by 12xe, i.e., 12xe 14 fyjKE  e : x 14 yg.

We now show that e is defined exactly on the set of constants
that are relevant with respect to Ce. And that it is really an equiv-

L. Serafini, M. Homola / Web Semantics: Science, Services and Agents on the World Wide Web 1213 (2012) 6487

alence relation on this set. This will justify the construction of the
model that will then follow.

By constants relevant to Ce we mean all constants a such that
the calculus proves KE  e : >a. The following lemma shows
that for any such constant there is the respective equivalence
class of e is nonempty. This ensures that we will find a domain
element to interpret each constant when we construct the model
below.

Lemma 8. Given a CKR K over hC; Ri, its extension KE, and the
relation e as defined in Definitions 22 and 23, then for any constant a
of R and for any e 2 DC the following holds:

12ae

 ; () KE  e : >a

 ; then there is a b such that KE  e : a 14 b, which
Proof. If 12ad
implies that KE  e : >a. Vice versa,
if KE  e : >a then by
LReas we have KE  e : a 14 a. Therefore by definition a 2 12ae, which
implies 12ae

 ;. h

To justify the existence of equivalence classes we must also

show that e is an equivalence relation.
Lemma 9. The relation e is an equivalence relation on the set
fajKE  e : >ag .

Proof. Equivalence is defined as a reflexive, symmetric, and transitive binary relation. Let us show that e has all these properties:
 reflexivity: KE  e : >a implies KE  e : a 14 a, which implies

 symmetry: aeb implies KE  e : a 14 b, by LReas this implies
 transitivity:

that aea;
that KE  e : b 14 a, and therefore bea;
aeb
and
KE  e : b 14 c. By LReas we have that KE  e : a 14 c, and therefore also aec. h

imply KE  e : a 14 b

bec

and

Finally we construct a model I of K, using the equivalence classes of e as domain elements for each local interpretation and
retrieving the interpretation of concepts and roles from KE by the
CKR calculus.

Definition 24 (Model construction). Given a CKR K over hC; Ri,
given KE, and the equivalence relations e for each e 2 DC as
defined in Definitions 22 and 23, let us construct an interpretation
I 14 fI ege2DC where for each e 2 DC, the local
interpretation
I e 14 hDe;	I ei is defined as follows:

De 14 f12xejKE  e : >xg;
aI e 14 12ae

if KE  e : >a;

undefined otherwise;

AI e 14 f12xejKE  e : Axg;
RI e 14 fh12xe;12yeijKE  e : Rx; yg
for any constant, atomic concept, and atomic role a; A; R. For complex concepts and roles the interpretation is inductively defined as
given in Table 1.

We first prove that complex concepts and roles are well defined
with respect to the CKR calculus, that is, any ABox assertion is satisfied
by the constructed model if and only if it is proved by the calculus.

Lemma 10. Given a CKR K over hC; Ri, and given KE and I as
constructed in Definitions 22 and 24, then for all e 2 DC, all constants
a; b, all complex concepts C, and all possibly inverse roles R of R the
following holds:
 12ae 2 CI e iff KE  e : Ca;
 h12ae;12bei 2 RI e iff KE  e : Ra; b.

Proof. By structural induction:

construction;

1. C 14 A is atomic:
2. C 14 :D : 12ae 2 :DI e

this case follows directly from the
iff 12ae 2 De n DI e

iff KE  e : >a and
KE 0 e : Da (first from the construction, second from the
iff KE  e : >a and KE  e : :Da
induction hypothesis)
(from Lemma 7) iff KE  e : :Da (by LReas);

3. C 14 F u G : 12ae 2 F u GI e

iff
KE  e : Fa and KE  e : Ga (by induction hypothesis) if
KE  e : F u Ga (by LReas);

and 12ae 2 GI e

12ae 2 FI e

4. C 14 F t G : 12ae 2 F t GI e

iff
KE  e : Fa or KE  e : Ga (by induction hypothesis) iff
KE  e : F t Ga (by LReas);
5. C 14 9R:D : 12ae 2 9R:DI e iff for some 12be h12ae;12bei 2 RI e and
12be 2 DI e
some b we have KE  e : Ra; b and
KE  e : Db (by the construction and induction hypothesis)
iff KE  e : 9R:Da (by LReas);

12ae 2 GI e

for

12ae 2 FI e

iff

iff

iff

or

6. C 14PnR:D : analogously to the previous case;
7. C 14 8R:D : can be rewritten as :9R::D;
8. C 146nR:D : can be rewritten as : P n  1R:D;
9. C 14 9R:Self : 12ae 2 9R: SelfI e

iff

iff
KE  e : Ra; a (from the construction) iff KE  e : 9R:Selfa
(by LReas);
10. C 14 fbg : 12ae 2 fbgI e iff 12ae 14 12be iff aeb iff KE  e : a 14 b (by
definition of e) iff KE  e : fbga;

h12ae;12aei 2 RI e

11. R is atomic: this case follows directly from the construction;
12. R 14 S is an inverse role: h12ae;12bei 2 RI e iff h12be;12eei 2 SI e iff
KE  e : Sb; a (by induction hypothesis) iff KE  e : Ra; b
(by LReas). h

The last lemma that we need before we prove that I is a model
of K is the following one which shows that the interpretation of
constants match between Ie and I f for constants defined in Dd.
Lemma 11. If 12ae

 ; and e  f, then 12ae 14 12af.

Proof. Let us prove that 12ae #12af: if b 2 12ae then KE  e : a 14 b (by
the construction), then also KE  f : a 14 b (by Pop), which finally
gives us b 2 12af (again by the construction).
Vice versa, let us prove that 12af #12ae: if b 2 12af then KE  f : a 14 b
from the construction of f. We have assumed 12ae
 ;, hence by
Lemma 8 we get K  e : >a, which gives us K  f : >ea by Pop.
Since KE  f : a 14 b, we get K  f : >eb by LReas, which finally allows
us to apply Push at KE  f : a 14 b and thus derive KE  e : a 14 b and
hence from the construction of e we have b 2 12ae. h

We will now prove that I is a CKR model for KE, by showing
that all conditions of Definition 9 are satisfied. Note that for sake
of clarity in the following enumeration we will keep the same
notation as in Definition 9 (i.e., the previously bound d is now
any d 2 DC):
1. >dI f #>eI f

iff KE  f : >dx. Since
KE  f : >d v >e by LReas, we have that KE  f : >ex, which
implies that 12xf 2 >eI f .

if d  e : 12xf 2 >dI f

If

iff

KE  d : Cfx.

h12xd;12ydi 2 RfI d,

2. CfI d #>fI d : 12xd 2 CfI d
Since
KE  d : Cf v >f by LReas, we have that KE  d : >fx, which
implies that 12xd 2 >fI d .
3. RfI d #>fI d 
 >fI d :
then KE  d :
Rfx; y. Furthermore we have that KE  d : > v 8Rf :>f, and
KE  d : 9Rf :> v >f, which implies that KE  d : >fx and
KE  d : >fy. This implies that h12xd;12ydi 2 >fI d .
4. if d  e, and aI e 2 Dd then aI e 14 aI d . 12ae 2 Dd iff there is a b,
such that 12bd 14 12ae, and 12bd 2 Dd. By Lemma 11 we have that
12bd 14 12be which implies that 12be 14 12ae. This implies that
KE  e : a 14 b, and therefore that KE  d : a 14 b, which implies
12bd 14 12ad. Summing up, aI e 14 12ae 14 12bd 14 12ad 14 aI d.
iff
KE  e : CdBx.
that
KE  e : CdBx iff KE  e : CdBex, which holds iff 12xe 2 CdBe.
An analogous argument can be done if X is a role symbol.
6. XdI e 14 XdI d if d  e. Let X be a concept symbol C. 12xe 2 CdI e
iff KE  e : Cdx iff KE  d : Cdx iff 12xe 2 CdI d . An analogous
argument can be done if X is a role symbol.
7. CfI d 14 CfI e \ Dd, if d  e: 12xd 2 CfI d
iff KE  d : Cfx iff
and KE  e : Cfx
iff
12xe 2 CfI d \ Dd
iff

5. XdBI e 14 XdBeI e : Let X be a concept C.

Since KE  e : CdB  CdBe, we have

iff KE  e : >d
12xe 2 >dI d

12xe 2 CdB,

iff

KE  e : >d u Cfx
12xe 2 CfI d
and
12xd 2 CfI d \ Dd.

8. RfI d 14 RfI e \ Dd 
 Dd, if d  e The same argument as the
9. I d  / for all d : / 2 KE. Consider the four different axioms:

previous point.
(a) / is Ca: in this case KE  d : Ca, therefore 12ad 2 CI d follows from Lemma 10;
(b) / is Ra; b and / is :Ra; b: by construction h12ad;12bdi 2 RI d
or h12ad;12bdi R RI d ;
(c) / is C v D: if 12xd 2 CI d, then KE  d : Cx by Lemma 10.
Since in this case KE  d : C v D by LReas we have that
KE  d : Dx and therefore that 12xd 2 DI d again by Lemma
10;
(d) / is R1  			  Rn v R: if h12xd;12ydi 2 R1  			  RnI d then there
must be 12z1d; . . . c;12zn1d
h12xd;12z1di 2 RI d
1 ,
h12z1d;12z2di 2 RI d
n . From the construc-
tion
KE  d : R1x; z1; KE  d : R2z1;z2; . . . ; KE  d : Rnzn1; y.
Since in this case also KE  d : R1  . . .  Rn v R than by LReas
we have KE  Rx; y and therefore h12xd;12ydi 2 R. Please note
that this holds also in case that any of R; R1; . . . c; Rn is an
inverse role.

such that
2 ; . . . ;h12zn1d;12ydi 2 RI d

have

we

into KE, therefore by LReas we have KE  d : > xd

We have just showed that I is a model of K. During the construction of KE
(Definition 22) we have added the formula
d : > xd
. By
the construction of the model I (Definition 24), this implies
12xd
0 2 Dd. Therefore K is d-consistent.

A.3. Proof of Lemma 3

Lemma 3. If K is d-satisfiable then #K is satisfiable.
As K is d-satisfiable, there exists a model I be a model of K with
 ;. Let us construct a DL interpretation I 14 hD;	Ii over #C; R

Dd
as follows:

d2DC

1. D 14

Dd [ fxundefg where xundef is a new element not occur-
2. adI 14 aI d if aI d is defined otherwise adI 14 xundef for every
3. Ad

ring in Dd for all d 2 DC;
individual a and for every d 2 DC; undefI 14 xundef;
eI 14 CI d
d; e 2 DC;

for every atomic concept C of R and for every

Sd;e; f

4. Rd

I 14 Id

eI 14 RI d

for every atomic role R of R and for every d; e 2 DC;
dI  Re
fI for every role R and for all d; e; f 2 DC;
First of all it is apparent from the construction that D  ;. It remains to prove that I satisfies all axioms of #K as given in Definition 21. The satisfaction of the axioms introduced in items 13
and 57 follows directly from the construction and from the corresponding condition of I being a CKR-model (Definition 9). Let us
now show the satisfaction of the remaining axioms (items 4, 8,
and 9).
d u faeg v fadg for
any individual a and for any two d; e 2 DC. Let x 2 >d
d u faegI ,
that is, x 2 >d
dI and x 14 aeI . Notice that x  xundef because
x 2 >d
dI 14 >I d
d 14 Dd and the construction implies xundef R Dd. Altogether this implies that aI e 14 aeI
is defined in I and also
aI e 2 Dd 14 >d
dI . From Condition 4 of the CKR model this implies
that x 14 aI e 14 aI d and therefore x 2 fadgI and hence the axiom
is satisfied.

The first type of axioms added in item 4 is >d

The second type of axioms added in item 4 is fadg v fae; undefg
for any individual a and for any two d; e 2 DC. That is, we have to
show that either adI 14 aeI of adI 14 undefI . If aI d is defined,
then from Condition 4 of CKR models we have aI d 14 aI e and hence
from the construction adI 14 aeI . If aI d is undefined, then directly from the construction adI 14 undefI .

The first type of axioms introduced in item 8 is Id

The last type of axioms added in item 4 is :>d

dundef for any
d 2 DC. This follows directly from the construction of I as
undefI 14 xundef R >d
d v Rd
for any role R and for any d; e; f 2 DC with d  e. Let us first realize
dI 14 II d
that Id
d , that is, it is the identity relation on Dd. Hence
f  Id
d  Re
f I \ Dd 
 Dd. The fact that this set is a subset
Id
f I follows as a consequence of the construction of I and Conof Rd
dition 8 of CKR models.

dI 14 Dd.

dI 14 Re

d  Re

f  Id

of

 Id

f I .

gives

d v Rd

Condition

and Sd;e;f

f 14 Re

CKR models

f \ Dd 
 Dd # RI e

The second type of axioms introduced in item 8 is Rd

f for
any role R and for any d; e; f 2 DC with d  e. Similarly to the pre-
case,
us
vious
f \ Dd 
 Dd and from the construction of I it follows that
f 14 RI e
RI d
f 14 RI e
f I 14 RI d
Rd
In addition, step 8 (b) introduces two new axioms of thew form
f v Sd;e;f
d  Re
Id
for each role R and for any
d; e; f 2 DC with d  e. The first axiom is trivially satisfied due to
f I . Sithe construction of I which implies that Sd;e;f
milarly
then
x 2 Id
and since we have already proven that
f then x 2 Rd
I  Id

d  Re
d  Re
Finally item 9, that is, the fact that I satisfies also the
axioms /#d; / 2 KCd, is a consequence of the fact that 	#d is
defined on the basis of an embedding of R into #C; R, and that
each pair of interpretations I d of R and I of #C; R complies with
this embedding. Then this item is a direct consequence of
Lemma 1.

for
dI
f  Id
f  Id
d v Rd

I 14 Id
x 2 Sd;e;f

dI  Re
 Id
dI

second

axiom,

f I .

the

f v Re

if

A.4. Proof of Lemma 4

Lemma 4. If there is a d such that #K 2 >d
satisfiable.

d v ?, then K is d-

Given a CKR K let I be a model of #K such that >d

empty. This model exists since by hypothesis #K 0 >d
us construct
d 2 DC, I d 14 hDd; I di is defined as follows:

the CKR model I 14 fI dgd2DC

d is not
d v ?. Let
, where for every

L. Serafini, M. Homola / Web Semantics: Science, Services and Agents on the World Wide Web 1213 (2012) 6487

contexts n is always smaller than m. This is because whenever a
new context C is initialized, also k new formulae are added in the
meta knowledge, by which the dimensional values are associated
with C.

Let us now determine the size of #K. We will go through the

construction in Definition 21 point by point:

dI ;

1. Dd 14 >d

2. aI d 14 adI if adI  undefI otherwise aI d is undefined for every
individual a;
I d 14 Xd
BdI for every atomic concept/role X0
d0

3. Xd0

dB

We show that I is a model of K. By construction we have that
there is a d such that Dd is not empty. Let us show that all the conditions of Definition 9 are satisfied by I.

dI

#>f

#>d

2. I  Cd

3. I  9Rd

1. If d  e, then I  >f

e. This implies that >f

eI , which implies ReI d #>eI d 
 >eI d.

eI
Cd
#>d
implies
e and I  > v 8Rd
e implies that Rd
e :>d
eI

d v >f
which implies >dI f # >eI f .
e v >d
that
CeI d #>eI d.
e :> v >d
>d

eI ,
eI , which implies
eI

4. Suppose d  e and aI d is defined. From the construction of #K
we have I  fadg v fae; undefg, that is, either adI 14 aeI or
adI 14 undefI . However, since aI d is defined, due to the construction of I it must be the case that adI  undefI and hence
adI 14 aeI .
construction of I we have
aI d 14 adI 14 aeI 14 aI e.
Suppose the other case,
is defined and
aI e 2 Dd.
have
I  >d
dI \ faeIg #fadIg. We have
assumed aI e 2 Dd and hence the construction of I this implies
aeI 2 >d
dI and hence the above inclusion reduces into
faeIg #fadIg which implies aeI 14 adI and from construction of I also aI d 14 aI e .
dBeI
14 XdBeI e;
dI 14
Xd

XdBI e 14 Xe
d. This implies that XdI e 14 Xe

5. By construction of I, we have that

d u faeg v fadg, that is, >d

6. We have that I  Xd

i.e., d  e and aI e

of #K we

construction

From the

From the

d  Xe

7. If d  e, we have that I  Cd

f  Ce

f u >d

d. This implies that

dI , which implies CfI d 14 CfI e \ Dd;

8. I  Id

implies that RfI d  RfI e \ D2

f , implies that RfI d #RfI e \ D2
d.

d. The fact
9. Let d 14 dimC, if / 2 KC, then we have that I  /#d. Similarly
to the previous lemma, this again follows from the fact that I d
and I comply with the embedding respective to the operator
	 # d, and hence we obtain this condition by Lemma 1.

dI 14 XdI d;
f I 14 Ce
Cd
d  Re
that I  Rd

f I \ >d
f  Id
d v Rd
f v Re

A.5. Proof of Theorem 2

Theorem 2. If K is --stratified, then checking if K  d : / is decidable with the complexity upper-bound of 2NEXPTIME.

The decidability follows from Lemmas 3 and 4, as the problem
of checking K  e : / can be rewritten into the problem of checking
if #K  /]d and #K is --stratified. We will show that the
transformation #	 is polynomial. Since #K is SROIQ knowledge base and deciding entailment id 2NEXPTIME-hard for SROIQ
[35] it follows that checking if K  d : / is possible within the
upper bound of 2NEXPTIME worst case complexity.

Without loss of generality, we will consider the size of the input
to be the total number of occurrences of all symbols from R and C
in both K and / summed together with the total number of all DL
constructors in K and / and with the number of formulae in K and
/. We will denote this number by m. The real size of input to be
processed depends on the encoding of symbols. As the number of
symbols used in any particular knowledge base is always finite,
suitable encoding can always be found such that the real size of input is c 
 m for some constant c [36].

As explained before, the number of contextual dimensions is assumed to be a fixed constant k. While in theory the number of possible dimensional values may be large, in practise the number of

4. two axioms >d

3. a pair of axioms 9Rd

1. one axiom >f

2. one axiom Ad

d v >f

e v >d

e for any three initialized contexts Cd; Ce and
Cf, with d  e. These are maximum n3 of axioms of size 3, i.e.,
with total size bounded with 3 
 n3;
e for any two initialized contexts Cd; Ce and
for any Ae occurring in K. Note that Ae occurs in K whenever
AeB occurs in C with e 14 eB  g (below this sense will be also
used w.r.t. roles). This means that for each such occurrence of
Ae in K there is at least one actual occurrence of some AeB with
possibly incomplete dimensional vector. Therefore at most m
atomic symbols (concepts, roles and individuals) in total occur
in K in this sense. This implies that most m 
 n2 axioms of size
3 are added in this step, with total size bounded with
3 
 m 
 n2;

e :> v >d

e and > v 8Rd

e :>d

d  Xe

e; for any two initialized contexts Cd; Ce and for any Re occurring in K. Similarly to
the previous step this yields at most 2 
 m 
 n2 axioms of size 5,
i.e., with total size bounded with 10 
 m 
 n2;
d u faeg v fadg and fadg v fae; undefg for any two
initialized contexts Cd, Ce with d  e and for any constant a, and
one axiom :>d
dundef for any initialized context Cd This leads to
maximum of m 
 n2 axioms of size 7, maximum of m 
 n2
axioms of size 8, and maximum of n axioms of size 3. The total
sum of all these axioms is bounded under 15 
 m 
 n2  3 
 n;
d for any two initialized contexts Cd; Ce with
d  e and for any atomic concept or role Xd occurring in K. This
again leads to the maximum of m 
 n2 axioms of size 3 with
total size bounded with 3 
 m 
 n2;
f  Ae
d for any two initialized contexts Cd; Ce with d  e
and for any atomic concept Af occurring in K. This leads to
the maximum of m 
 n2 axioms of size 5, i.e., with total size
bounded with 5 
 m 
 n2;
f  Id

d  Re
, and
for any two initialized contexts Cd; Ce with
Sd;e;f

d  e and for any Rf occurring in K. This leads to the maximum
of m 
 n2 axioms of size 7; m 
 n2 axioms of size 3, and twice
m 
 n2 axioms size 5. Total size of both these sets together is
therefore bounded with 20 
 m 
 n2;

f v Sd;e;f

d  Re
Id

f v Re
f ,

d v Rd

d v Rd

f u >d

f , Rd

 Id

7. four axioms Id

5. one axiom Xd

6. Ad

8. one axiom /#d for every axiom / occurring in any context KC
of K. In this step less than m axioms are added. All of these
axioms are transformed by the #	 operator which yields to a
blow up in the axiom size because each symbol may be replaced
by up to five new symbols (i.e., the transformation is linear).
Therefore the total size of the axioms added in this step is
bounded with 5 
 m.

Summing up, the transformed knowledge base #K is bounded
in size with 59 
 m 
 n2  8 
 m which is under Om3 since n 6 m.
